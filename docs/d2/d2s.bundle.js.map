{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/./src/binary/bitreader.ts","webpack://[name]/./src/binary/bitwriter.ts","webpack://[name]/./src/d2/attribute_enhancer.ts","webpack://[name]/./src/d2/attributes.ts","webpack://[name]/./src/d2/d2s.ts","webpack://[name]/./src/d2/header.ts","webpack://[name]/./src/d2/items.ts","webpack://[name]/./src/d2/skills.ts","webpack://[name]/./src/d2/stash.ts","webpack://[name]/./src/d2/types.ts","webpack://[name]/./src/d2/versions/default_header.ts","webpack://[name]/./src/data/parser.ts","webpack://[name]/./src/index.ts"],"names":[],"mappings":"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EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,GAAG,EAAC,GAAG,CAAC,EAAC,CAAC,GAAG,EAAC,CAAC,CAAC,GAAG,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,EAAC,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjP,kBAAkB;AAClB,IAAM,cAAc,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,G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","file":"d2s.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","export class BitReader {\n  public littleEndian = true;\n  public bits: Uint8Array;\n  public offset = 0;\n\n  constructor(arrBuffer: ArrayBuffer) {\n    const typedArray = new Uint8Array(arrBuffer);\n    this.bits = new Uint8Array(typedArray.length * 8);\n    typedArray.reduce((acc: number, c: number) => {\n      const b = c\n        .toString(2)\n        .padStart(8, \"0\")\n        .split(\"\")\n        .reverse()\n        .map((e) => parseInt(e, 2));\n      b.forEach((bit) => (this.bits[acc++] = bit));\n      return acc;\n    }, 0);\n  }\n\n  public ReadBit(): number {\n    return this.bits[this.offset++];\n  }\n\n  public ReadBitArray(count: number): Uint8Array {\n    const bits = new Uint8Array(count);\n    for (let i = 0; i < count; i++) {\n      bits[i] = this.bits[this.offset++];\n    }\n    return bits;\n  }\n\n  public ReadBits(bytes: Uint8Array, count: number): Uint8Array {\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < count; i++) {\n      if (this.bits[this.offset + i]) {\n        bytes[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      bitIndex++;\n      if (bitIndex == 8) {\n        byteIndex++;\n        bitIndex = 0;\n      }\n    }\n    this.offset += count;\n    return bytes;\n  }\n\n  public ReadBytes(bytes: number): Uint8Array {\n    return this.ReadBits(new Uint8Array(bytes), bytes * 8);\n  }\n\n  public ReadArray(bytes: number): Uint8Array {\n    return this.ReadBytes(bytes);\n  }\n\n  public ReadByte(bits = 8): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(1), bits).buffer);\n    return dataview.getUint8(0);\n  }\n\n  public ReadUInt8(bits = 8): number {\n    return this.ReadByte(bits);\n  }\n\n  public ReadUInt16(bits: number = 8 * 2): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(2), bits).buffer);\n    return dataview.getUint16(0, this.littleEndian);\n  }\n\n  public ReadUInt32(bits: number = 8 * 4): number {\n    const dataview = new DataView(this.ReadBits(new Uint8Array(4), bits).buffer);\n    return dataview.getUint32(0, this.littleEndian);\n  }\n\n  public ReadString(bytes: number): string {\n    const buffer = this.ReadBytes(bytes).buffer;\n    return new TextDecoder().decode(buffer);\n  }\n\n  public ReadNullTerminatedString(): string {\n    const start = this.offset;\n    while (this.ReadByte()) {}\n    const end = this.offset - 8;\n    const buffer = this.SeekBit(start).ReadBytes((end - start) / 8);\n    this.SeekBit(end + 8);\n    return new TextDecoder().decode(buffer);\n  }\n\n  public SkipBits(number: number): BitReader {\n    this.offset += number;\n    return this;\n  }\n\n  public SkipBytes(number: number): BitReader {\n    return this.SkipBits(number * 8);\n  }\n\n  public SeekBit(offset: number): BitReader {\n    this.offset = offset;\n    return this;\n  }\n\n  public SeekByte(offset: number): BitReader {\n    return this.SeekBit(offset * 8);\n  }\n\n  public Align(): BitReader {\n    this.offset = (this.offset + 7) & ~7;\n    return this;\n  }\n}\n","export class BitWriter {\n  public littleEndian = true;\n  public bits: Uint8Array;\n  public offset = 0;\n  public length = 0;\n\n  constructor(capacity = 8192) {\n    this.bits = new Uint8Array(capacity);\n  }\n\n  public WriteBit(value: number): BitWriter {\n    if (this.offset >= this.bits.length) {\n      const resized = new Uint8Array(this.bits.length + 8192);\n      resized.set(this.bits, 0);\n      this.bits = resized;\n    }\n    this.bits[this.offset++] = value;\n    if (this.offset > this.length) this.length++;\n    return this;\n  }\n\n  public WriteBits(bits: Uint8Array, numberOfBits: number): BitWriter {\n    for (let i = 0; i < numberOfBits; i++) {\n      this.WriteBit(bits[i]);\n    }\n    return this;\n  }\n\n  public WriteBytes(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\n    const toWrite = new Uint8Array(numberOfBits);\n    bytes.reduce((acc, c) => {\n      const b = c\n        .toString(2)\n        .padStart(8, \"0\")\n        .split(\"\")\n        .reverse()\n        .map((e) => parseInt(e, 2));\n      b.forEach((bit) => (toWrite[acc++] = bit));\n      return acc;\n    }, 0);\n    return this.WriteBits(toWrite, numberOfBits);\n  }\n\n  public WriteArray(bytes: Uint8Array, numberOfBits: number = bytes.length * 8): BitWriter {\n    return this.WriteBytes(bytes, numberOfBits);\n  }\n\n  public WriteByte(value: number, numberOfBits = 8): BitWriter {\n    const buffer = new Uint8Array(1);\n    new DataView(buffer.buffer).setUint8(0, value);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteUInt8(value: number, numberOfBits = 8): BitWriter {\n    return this.WriteByte(value, numberOfBits);\n  }\n\n  public WriteUInt16(value: number, numberOfBits: number = 8 * 2): BitWriter {\n    const buffer = new Uint8Array(2);\n    new DataView(buffer.buffer).setUint16(0, value, this.littleEndian);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteUInt32(value: number, numberOfBits: number = 8 * 4): BitWriter {\n    const buffer = new Uint8Array(4);\n    new DataView(buffer.buffer).setUint32(0, value, this.littleEndian);\n    return this.WriteBytes(buffer, numberOfBits);\n  }\n\n  public WriteString(value: string, numberOfBytes: number): BitWriter {\n    const buffer = new TextEncoder().encode(value);\n    return this.WriteBytes(buffer, numberOfBytes * 8);\n  }\n\n  public SeekBit(offset: number): BitWriter {\n    this.offset = offset;\n    if (this.offset > this.length) {\n      this.length = this.offset;\n    }\n    return this;\n  }\n\n  public SeekByte(offset: number): BitWriter {\n    return this.SeekBit(offset * 8);\n  }\n\n  public PeekBytes(count: number): Uint8Array {\n    const buffer = new Uint8Array(count);\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < count * 8; ++i) {\n      if (this.bits[this.offset + i]) {\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      ++bitIndex;\n      if (bitIndex >= 8) {\n        ++byteIndex;\n        bitIndex = 0;\n      }\n    }\n    return buffer;\n  }\n\n  public Align(): BitWriter {\n    this.offset = (this.offset + 7) & ~7;\n    if (this.offset > this.length) {\n      this.length = this.offset;\n    }\n    return this;\n  }\n\n  public ToArray(): Uint8Array {\n    const buffer = new Uint8Array((this.length - 1) / 8 + 1);\n    let byteIndex = 0;\n    let bitIndex = 0;\n    for (let i = 0; i < this.length; ++i) {\n      if (this.bits[i]) {\n        buffer[byteIndex] |= (1 << bitIndex) & 0xff;\n      }\n      ++bitIndex;\n      if (bitIndex >= 8) {\n        ++byteIndex;\n        bitIndex = 0;\n      }\n    }\n    return buffer;\n  }\n}\n","import * as types from \"./types\";\n\nenum ItemType {\n  Armor = 0x01,\n  Shield = 0x02, //treated the same as armor... only here to be able to parse nokkas jsons\n  Weapon = 0x03,\n  Other = 0x04,\n}\n\n//do nice stuff\n//combine group properties (all resists/all stats) and build friendly strings for a ui\n//enhanced def/durability/weapon damage.\n//lookup socketed compact items (runes/gems) properties for the slot they are in\n//compute attributes like str/resists/etc..\nexport async function enhanceAttributes(char: types.ID2S, constants: types.IConstantData, config?: types.IConfig) {\n  enhanceItems(char.items, constants, char.attributes.level, config);\n  enhanceItems([char.golem_item], constants, char.attributes.level, config);\n  enhanceItems(char.merc_items, constants, char.attributes.level, config);\n  enhanceItems(char.corpse_items, constants, char.attributes.level, config);\n  enhancePlayerAttributes(char, constants, config);\n}\n\nexport async function enhancePlayerAttributes(char: types.ID2S, constants: types.IConstantData, config?: types.IConfig) {\n  const items = char.items.filter((item) => {\n    return item.location_id === 1 && item.equipped_id !== 13 && item.equipped_id !== 14;\n  });\n\n  char.item_bonuses = ([] as types.IMagicProperty[]).concat\n    .apply(\n      [],\n      items.map((item) => _allAttributes(item, constants))\n    )\n    .filter((attribute) => attribute != null);\n  char.item_bonuses = _groupAttributes(char.item_bonuses, constants);\n  _enhanceAttributeDescription(char.item_bonuses, constants, char.attributes.level, config);\n}\n\nexport async function enhanceItems(\n  items: types.IItem[],\n  constants: types.IConstantData,\n  level = 1,\n  config?: types.IConfig,\n  parent?: types.IItem\n) {\n  if (!items) {\n    return;\n  }\n  for (const item of items) {\n    if (!item) {\n      continue;\n    }\n    if (item.socketed_items && item.socketed_items.length) {\n      enhanceItems(item.socketed_items, constants, level, config, item);\n    }\n    enhanceItem(item, constants, level, config, parent);\n  }\n}\n\nexport function enhanceItem(item: types.IItem, constants: types.IConstantData, level = 1, config?: types.IConfig, parent?: types.IItem) {\n  if (parent) {\n    //socket item.\n    const pt = constants.armor_items[parent.type] || constants.weapon_items[parent.type] || constants.other_items[item.type];\n    const t = constants.other_items[item.type];\n    if (t.m) {\n      item.magic_attributes = _compactAttributes(t.m[pt.gt], constants);\n    }\n  }\n  let details = null;\n  if (constants.armor_items[item.type]) {\n    details = constants.armor_items[item.type];\n    item.type_id = ItemType.Armor;\n  } else if (constants.weapon_items[item.type]) {\n    details = constants.weapon_items[item.type];\n    item.type_id = ItemType.Weapon;\n    const base_damage = {} as types.IWeaponDamage;\n    if (details.mind) base_damage.mindam = details.mind;\n    if (details.maxd) base_damage.maxdam = details.maxd;\n    if (details.min2d) base_damage.twohandmindam = details.min2d;\n    if (details.max2d) base_damage.twohandmaxdam = details.max2d;\n    item.base_damage = base_damage;\n  } else if (constants.other_items[item.type]) {\n    item.type_id = ItemType.Other;\n    details = constants.other_items[item.type];\n  }\n  if (details) {\n    if (details.n) item.type_name = details.n;\n    if (details.rs) item.reqstr = details.rs;\n    if (details.rd) item.reqdex = details.rd;\n    if (details.i) item.inv_file = details.i;\n    if (details.ih) item.inv_height = details.ih;\n    if (details.iw) item.inv_width = details.iw;\n    if (details.it) item.inv_transform = details.it;\n    if (details.iq) item.item_quality = details.iq;\n    if (details.c) item.categories = details.c;\n    if (item.multiple_pictures) {\n      item.inv_file = details.ig[item.picture_id];\n    }\n    if (item.magic_prefix || item.magic_suffix) {\n      if (item.magic_prefix && constants.magic_prefixes[item.magic_prefix]?.tc) {\n        item.transform_color = constants.magic_prefixes[item.magic_prefix].tc;\n      }\n      if (item.magic_suffix && constants.magic_suffixes[item.magic_suffix]?.tc) {\n        item.transform_color = constants.magic_suffixes[item.magic_suffix].tc;\n      }\n    } else if (item.magical_name_ids && item.magical_name_ids.length === 6) {\n      for (let i = 0; i < 6; i++) {\n        const id = item.magical_name_ids[i];\n        if (id) {\n          if (i % 2 == 0 && constants.magic_prefixes[id] && constants.magic_prefixes[id]?.tc) {\n            // even is prefixes\n            item.transform_color = constants.magic_prefixes[id].tc;\n          } else if (constants.magic_suffixes[id] && constants.magic_suffixes[id]?.tc) {\n            // odd is suffixes\n            item.transform_color = constants.magic_suffixes[id].tc;\n          }\n        }\n      }\n    } else if (item.unique_id) {\n      const unq = constants.unq_items[item.unique_id];\n      if (details.ui) item.inv_file = details.ui;\n      if (unq && unq.i) item.inv_file = unq.i;\n      if (unq && unq.tc) item.transform_color = unq.tc;\n    } else if (item.set_id) {\n      const set = constants.set_items[item.set_id];\n      if (details.ui) item.inv_file = details.ui;\n      if (set && set.i) item.inv_file = set.i;\n      if (set && set.tc) item.transform_color = set.tc;\n    }\n  }\n\n  if (item.magic_attributes || item.runeword_attributes || item.socketed_items) {\n    item.displayed_magic_attributes = _enhanceAttributeDescription(item.magic_attributes, constants, level, config);\n    item.displayed_runeword_attributes = _enhanceAttributeDescription(item.runeword_attributes, constants, level, config);\n    item.combined_magic_attributes = _groupAttributes(_allAttributes(item, constants), constants);\n    item.displayed_combined_magic_attributes = _enhanceAttributeDescription(item.combined_magic_attributes, constants, level, config);\n  }\n}\n\nfunction _enhanceAttributeDescription(\n  _magic_attributes: types.IMagicProperty[],\n  constants: types.IConstantData,\n  level = 1,\n  config?: types.IConfig\n): types.IMagicProperty[] {\n  if (!_magic_attributes) return [];\n\n  const magic_attributes: types.IMagicProperty[] = [..._magic_attributes.map((attr) => ({ ...attr }))];\n  const dgrps = [0, 0, 0];\n  const dgrpsVal = [0, 0, 0];\n  for (const property of magic_attributes) {\n    const prop = constants.magical_properties[property.id];\n    const v = property.values[property.values.length - 1];\n    if (prop.dg) {\n      if (dgrpsVal[prop.dg - 1] === 0) {\n        dgrpsVal[prop.dg - 1] = v;\n      }\n      if (dgrpsVal[prop.dg - 1] - v === 0) {\n        dgrps[prop.dg - 1]++;\n      }\n    }\n  }\n  for (const property of magic_attributes) {\n    const prop = constants.magical_properties[property.id];\n    if (prop == null) {\n      throw new Error(`Cannot find Magical Property for id: ${property.id}`);\n    }\n    let v = property.values[property.values.length - 1];\n    if (prop.ob === \"level\") {\n      switch (prop.o) {\n        case 1: {\n          v = Math.floor((level * v) / 100);\n          break;\n        }\n        case 2:\n        case 3:\n        case 4:\n        case 5: {\n          v = Math.floor((level * v) / 2 ** prop.op);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n      property.op_stats = prop.os;\n      property.op_value = v;\n    }\n    let descFunc = prop.dF;\n    let descString = v >= 0 ? prop.dP : prop.dN;\n    let descVal = prop.dV;\n    let desc2 = prop.d2;\n    if (prop.dg && dgrps[prop.dg - 1] === 4) {\n      v = dgrpsVal[prop.dg - 1];\n      descString = v >= 0 ? prop.dgP : prop.dgN ? prop.dgN : prop.dgP;\n      descVal = prop.dgV;\n      descFunc = prop.dgF;\n      desc2 = prop.dg2;\n    }\n    if (prop.np) {\n      //damage range or enhanced damage.\n      let count = 0;\n      descString = prop.dR;\n\n      if (prop.s === \"poisonmindam\") {\n        //poisonmindam see https://user.xmission.com/~trevin/DiabloIIv1.09_Magic_Properties.shtml for reference\n        const min = Math.floor((property.values[0] * property.values[2]) / 256);\n        const max = Math.floor((property.values[1] * property.values[2]) / 256);\n        const seconds = Math.floor(property.values[2] / 25);\n        property.values = [min, max, seconds];\n      }\n\n      if (property.values[0] === property.values[1]) {\n        count++;\n        descString = prop.dE;\n        //TODO. why???\n        if (prop.s === \"item_maxdamage_percent\") {\n          descString = `+%d% ${descString.replace(/}/gi, \"\")}`;\n        }\n      }\n      property.description = descString.replace(/%d/gi, () => {\n        const v = property.values[count++];\n        return v;\n      });\n    } else {\n      _descFunc(property, constants, v, descFunc, descVal, descString, desc2);\n    }\n  }\n\n  if (config?.sortProperties) {\n    //sort using sort order from game.\n    magic_attributes.sort((a, b) => constants.magical_properties[b.id].so - constants.magical_properties[a.id].so);\n  }\n\n  for (let i = magic_attributes.length - 1; i >= 1; i--) {\n    for (let j = i - 1; j >= 0; j--) {\n      if (magic_attributes[i].description === magic_attributes[j].description) {\n        magic_attributes[j].visible = false;\n      }\n    }\n  }\n\n  return magic_attributes;\n}\n\nfunction _compactAttributes(mods: any[], constants: types.IConstantData): types.IMagicProperty[] {\n  const magic_attributes = [] as types.IMagicProperty[];\n  for (const mod of mods) {\n    const properties = constants.properties[mod.m] || [];\n    for (let i = 0; i < properties.length; i++) {\n      const property = properties[i];\n      let stat = property.s;\n      switch (property.f) {\n        case 5: {\n          stat = \"mindamage\";\n          break;\n        }\n        case 6: {\n          stat = \"maxdamage\";\n          break;\n        }\n        case 7: {\n          stat = \"item_maxdamage_percent\";\n          break;\n        }\n        case 20: {\n          stat = \"item_indesctructible\";\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n      const id = _itemStatCostFromStat(stat, constants);\n      const prop = constants.magical_properties[id];\n      if (prop.np) i += prop.np;\n      const v = [mod.min, mod.max];\n      if (mod.p) {\n        v.push(mod.p);\n      }\n      magic_attributes.push({\n        id: id,\n        values: v,\n        name: prop.s,\n      } as types.IMagicProperty);\n    }\n  }\n  return magic_attributes;\n}\n\nfunction _descFunc(\n  property: types.IMagicProperty,\n  constants: types.IConstantData,\n  v: number,\n  descFunc: number,\n  descVal: number,\n  descString: string,\n  desc2: string\n) {\n  if (!descFunc) {\n    return;\n  }\n  const sign = v >= 0 ? \"+\" : \"\";\n  let value = null;\n  const desc2Present = descFunc >= 6 && descFunc <= 10;\n  switch (descFunc) {\n    case 1:\n    case 6:\n    case 12: {\n      value = `${sign}${v}`;\n      break;\n    }\n    case 2:\n    case 7: {\n      value = `${v}%`;\n      break;\n    }\n    case 3:\n    case 9: {\n      value = `${v}`;\n      break;\n    }\n    case 4:\n    case 8: {\n      value = `${sign}${v}%`;\n      break;\n    }\n    case 5:\n    case 10: {\n      value = `${(v * 100) / 128}%`;\n      break;\n    }\n    case 11: {\n      property.description = descString.replace(/%d/, (v / 100).toString());\n      break;\n    }\n    case 13: {\n      const clazz = constants.classes[property.values[0]];\n      property.description = `${sign}${v} ${clazz.as}`;\n      break;\n    }\n    case 14: {\n      const clazz = constants.classes[property.values[1]];\n      const skillTabStr = clazz.ts[property.values[0]];\n      descString = skillTabStr.replace(/%d/gi, v);\n      property.description = `${descString} ${clazz.co}`;\n      break;\n    }\n    case 15: {\n      //todo... not right % chance?\n      let count = 2;\n      descString = descString\n        .replace(/%d%|%s/gi, () => {\n          const v = property.values[count--];\n          if (count == 0) {\n            return constants.skills[v].s;\n          }\n          return v;\n        })\n        .replace(/%d/, property.values[count--].toString());\n      property.description = `${descString}`;\n      break;\n    }\n    case 16: {\n      property.description = descString.replace(/%d/, v.toString());\n      property.description = property.description.replace(/%s/, constants.skills[property.values[0]].s);\n      break;\n    }\n    case 17: {\n      //todo\n      property.description = `${v} ${descString} (Increases near [time])`;\n      break;\n    }\n    case 18: {\n      //todo\n      property.description = `${v}% ${descString} (Increases near [time])`;\n      break;\n    }\n    case 19: {\n      property.description = descString.replace(/%d/, v.toString());\n      break;\n    }\n    case 20: {\n      value = `${v * -1}%`;\n      break;\n    }\n    case 21: {\n      value = `${v * -1}`;\n      break;\n    }\n    case 22: {\n      //todo\n      property.description = `${v}% ${descString} [montype]`;\n      break;\n    }\n    case 23: {\n      //todo\n      property.description = `${v}% ${descString} [monster]]`;\n      break;\n    }\n    case 24: {\n      //charges\n      let count = 0;\n      descString = descString.replace(/%d/gi, () => {\n        return property.values[2 + count++].toString();\n      });\n      property.description = `Level ${property.values[0]} ${constants.skills[property.values[1]].s} ${descString}`;\n      break;\n    }\n    case 27: {\n      const skill = constants.skills[property.values[0]];\n      const clazz = _classFromCode(skill.c, constants);\n      property.description = `${sign}${v} to ${skill?.s} ${clazz?.co}`;\n      break;\n    }\n    case 28: {\n      const skill = constants.skills[property.values[0]];\n      property.description = `${sign}${v} to ${skill?.s}`;\n      break;\n    }\n    default: {\n      throw new Error(`No handler for descFunc: ${descFunc}`);\n    }\n  }\n  if (value) {\n    switch (descVal) {\n      case 0: {\n        property.description = `${descString}`;\n        break;\n      }\n      case 1: {\n        property.description = `${value} ${descString}`;\n        break;\n      }\n      case 2: {\n        property.description = `${descString} ${value}`;\n        break;\n      }\n      default: {\n        throw new Error(`No handler for descVal: ${descVal}`);\n      }\n    }\n  }\n  if (desc2Present) {\n    property.description += ` ${desc2}`;\n  }\n}\n\nfunction _itemStatCostFromStat(stat: string, constants: types.IConstantData): number {\n  return constants.magical_properties.findIndex((e) => e.s === stat);\n}\n\nfunction _classFromCode(code: string, constants: types.IConstantData): any {\n  return constants.classes.filter((e) => e.c === code)[0];\n}\n\nfunction _allAttributes(item: types.IItem, constants: types.IConstantData): types.IMagicProperty[] {\n  let socketed_attributes = [] as types.IMagicProperty[];\n  if (item.socketed_items) {\n    for (const i of item.socketed_items) {\n      if (i.magic_attributes) {\n        socketed_attributes = socketed_attributes.concat(...JSON.parse(JSON.stringify(i.magic_attributes)));\n      }\n    }\n  }\n  const magic_attributes = item.magic_attributes || [];\n  const runeword_attributes = item.runeword_attributes || [];\n  return [\n    ...[],\n    ...JSON.parse(JSON.stringify(magic_attributes)),\n    ...JSON.parse(JSON.stringify(runeword_attributes)),\n    ...JSON.parse(JSON.stringify(socketed_attributes)),\n  ].filter((attribute) => attribute != null);\n}\n\nfunction _groupAttributes(all_attributes: types.IMagicProperty[], constants: types.IConstantData): types.IMagicProperty[] {\n  const combined_magic_attributes = [] as types.IMagicProperty[];\n  for (const magic_attribute of all_attributes) {\n    const prop = constants.magical_properties[magic_attribute.id];\n    const properties = combined_magic_attributes.filter((e) => {\n      //encoded skills need to look at those params too.\n      if (prop.e === 3) {\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\n      }\n      if (prop.dF === 15) {\n        return (\n          e.id === magic_attribute.id &&\n          e.values[0] === magic_attribute.values[0] &&\n          e.values[1] === magic_attribute.values[1] &&\n          e.values[2] === magic_attribute.values[2]\n        );\n      }\n      if (prop.dF === 16 || prop.dF === 23) {\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\n      }\n      if (prop.s === \"state\" || prop.s === \"item_nonclassskill\") {\n        //state\n        return e.id === magic_attribute.id && e.values[0] === magic_attribute.values[0] && e.values[1] === magic_attribute.values[1];\n      }\n      return e.id === magic_attribute.id;\n    });\n    if (properties && properties.length) {\n      for (let i = 0; i < properties.length; i++) {\n        const property = properties[i];\n        if (prop.np) {\n          //damage props\n          property.values[0] += magic_attribute.values[0];\n          property.values[1] += magic_attribute.values[1];\n          break;\n        }\n        //only combine attributes if the params for the descFunc are the same.\n        let sameParams = true;\n        const numValues = prop.e === 3 ? 2 : 1;\n        for (let j = 0; j < property.values.length - numValues; j++) {\n          sameParams = property.values[j] === magic_attribute.values[j];\n          if (!sameParams) {\n            break;\n          }\n        }\n        if (sameParams) {\n          for (let j = 1; j <= numValues; j++) {\n            const idx = property.values.length - j;\n            property.values[idx] += magic_attribute.values[idx];\n          }\n        } else {\n          combined_magic_attributes.push({\n            id: magic_attribute.id,\n            values: magic_attribute.values,\n            name: magic_attribute.name,\n          } as types.IMagicProperty);\n        }\n      }\n    } else {\n      combined_magic_attributes.push({\n        id: magic_attribute.id,\n        values: magic_attribute.values,\n        name: magic_attribute.name,\n      } as types.IMagicProperty);\n    }\n  }\n  return combined_magic_attributes;\n}\n","import * as types from \"./types\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { BitWriter } from \"../binary/bitwriter\";\n\n//todo use constants.magical_properties and csvBits\nexport async function readAttributes(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\n  char.attributes = {} as types.IAttributes;\n  const header = reader.ReadString(2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\n  if (header != \"gf\") {\n    throw new Error(`Attribute header 'gf' not found at position ${reader.offset - 2 * 8}`);\n  }\n  let bitoffset = 0;\n  let id = reader.ReadUInt16(9);\n  //read till 0x1ff end of attributes is found\n  while (id != 0x1ff) {\n    bitoffset += 9;\n    const field = constants.magical_properties[id];\n    if (field === undefined) {\n      throw new Error(`Invalid attribute id: ${id}`);\n    }\n    const size = field.cB;\n    char.attributes[Attributes[field.s]] = reader.ReadUInt32(size);\n    //current_hp - max_stamina need to be bit shifted\n    if (id >= 6 && id <= 11) {\n      char.attributes[Attributes[field.s]] >>>= 8;\n    }\n    bitoffset += size;\n    id = reader.ReadUInt16(9);\n  }\n  reader.Align();\n}\n\nexport async function writeAttributes(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"gf\", 2); //0x0000 [attributes header = 0x67, 0x66 \"gf\"]\n  for (let i = 0; i < 16; i++) {\n    const property = constants.magical_properties[i];\n    if (property === undefined) {\n      throw new Error(`Invalid attribute: ${property}`);\n    }\n    let value = char.attributes[Attributes[property.s]];\n    if (!value) {\n      continue;\n    }\n    const size = property.cB;\n    if (i >= 6 && i <= 11) {\n      value <<= 8;\n    }\n    writer.WriteUInt16(i, 9);\n    writer.WriteUInt32(value, size);\n  }\n  writer.WriteUInt16(0x1ff, 9);\n  writer.Align();\n  return writer.ToArray();\n}\n\n//nokkas names\nconst Attributes = {\n  strength: \"strength\",\n  energy: \"energy\",\n  dexterity: \"dexterity\",\n  vitality: \"vitality\",\n  statpts: \"unused_stats\",\n  newskills: \"unused_skill_points\",\n  hitpoints: \"current_hp\",\n  maxhp: \"max_hp\",\n  mana: \"current_mana\",\n  maxmana: \"max_mana\",\n  stamina: \"current_stamina\",\n  maxstamina: \"max_stamina\",\n  level: \"level\",\n  experience: \"experience\",\n  gold: \"gold\",\n  goldbank: \"stashed_gold\",\n};\n","import * as types from \"./types\";\nimport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./header\";\nimport { readAttributes, writeAttributes } from \"./attributes\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { BitWriter } from \"../binary/bitwriter\";\nimport { readSkills, writeSkills } from \"./skills\";\nimport * as items from \"./items\";\nimport { enhanceAttributes, enhanceItems } from \"./attribute_enhancer\";\n\nconst defaultConfig = {\n  extendedStash: false,\n  sortProperties: true,\n} as types.IConfig;\n\nfunction reader(buffer: Uint8Array) {\n  return new BitReader(buffer);\n}\n\nasync function read(buffer: Uint8Array, constants: types.IConstantData, userConfig?: types.IConfig): Promise<types.ID2S> {\n  const char = {} as types.ID2S;\n  const reader = new BitReader(buffer);\n  const config = Object.assign(defaultConfig, userConfig);\n  await readHeader(char, reader);\n  //could load constants based on version here\n  await readHeaderData(char, reader, constants);\n  await readAttributes(char, reader, constants);\n  await readSkills(char, reader, constants);\n  await items.readCharItems(char, reader, constants, config);\n  await items.readCorpseItems(char, reader, constants, config);\n  if (char.header.status.expansion) {\n    await items.readMercItems(char, reader, constants, config);\n    await items.readGolemItems(char, reader, constants, config);\n  }\n  await enhanceAttributes(char, constants, config);\n  return char;\n}\n\nasync function readItem(\n  buffer: Uint8Array,\n  version: number,\n  constants: types.IConstantData,\n  userConfig?: types.IConfig\n): Promise<types.IItem> {\n  const reader = new BitReader(buffer);\n  const config = Object.assign(defaultConfig, userConfig);\n  const item = await items.readItem(reader, version, constants, config);\n  await enhanceItems([item], constants);\n  return item;\n}\n\nfunction writer(buffer: Uint8Array) {\n  return new BitWriter();\n}\n\nasync function write(data: types.ID2S, constants: types.IConstantData, userConfig?: types.IConfig): Promise<Uint8Array> {\n  const config = Object.assign(defaultConfig, userConfig);\n  const writer = new BitWriter();\n  writer.WriteArray(await writeHeader(data));\n  //could load constants based on version here\n  writer.WriteArray(await writeHeaderData(data, constants));\n  writer.WriteArray(await writeAttributes(data, constants));\n  writer.WriteArray(await writeSkills(data, constants));\n  writer.WriteArray(await items.writeCharItems(data, constants, config));\n  writer.WriteArray(await items.writeCorpseItem(data, constants, config));\n  if (data.header.status.expansion) {\n    writer.WriteArray(await items.writeMercItems(data, constants, config));\n    writer.WriteArray(await items.writeGolemItems(data, constants, config));\n  }\n  await fixHeader(writer);\n  return writer.ToArray();\n}\n\nasync function writeItem(\n  item: types.IItem,\n  version: number,\n  constants: types.IConstantData,\n  userConfig?: types.IConfig\n): Promise<Uint8Array> {\n  const config = Object.assign(defaultConfig, userConfig);\n  const writer = new BitWriter();\n  writer.WriteArray(await items.writeItem(item, version, constants, config));\n  return writer.ToArray();\n}\n\nexport { reader, writer, read, write, readItem, writeItem };\n","import * as types from \"./types\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { BitWriter } from \"../binary/bitwriter\";\n\nexport async function readHeader(char: types.ID2S, reader: BitReader) {\n  char.header = {} as types.IHeader;\n  //0x0000\n  char.header.identifier = reader.ReadUInt32().toString(16).padStart(8, \"0\");\n  if (char.header.identifier != \"aa55aa55\") {\n    throw new Error(`D2S identifier 'aa55aa55' not found at position ${reader.offset - 4 * 8}`);\n  }\n  //0x0004\n  char.header.version = reader.ReadUInt32();\n}\n\nexport async function readHeaderData(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\n  const v = await _versionSpecificHeader(char.header.version);\n  if (v == null) {\n    throw new Error(`Cannot parse version: ${char.header.version}`);\n  }\n  v.readHeader(char, reader, constants);\n}\n\nexport async function writeHeader(char: types.ID2S): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteUInt32(parseInt(char.header.identifier, 16)).WriteUInt32(char.header.version);\n\n  return writer.ToArray();\n}\n\nexport async function writeHeaderData(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  const v = await _versionSpecificHeader(char.header.version);\n  if (v == null) {\n    throw new Error(`Cannot parse version: ${char.header.version}`);\n  }\n  v.writeHeader(char, writer, constants);\n\n  return writer.ToArray();\n}\n\nexport async function fixHeader(writer: BitWriter) {\n  let checksum = 0;\n  const eof = writer.length / 8;\n  writer.SeekByte(0x0008).WriteUInt32(eof);\n  writer.SeekByte(0x000c).WriteUInt32(0);\n  for (let i = 0; i < eof; i++) {\n    let byte = writer.SeekByte(i).PeekBytes(1)[0];\n    if (checksum & 0x80000000) {\n      byte += 1;\n    }\n    checksum = byte + checksum * 2;\n    //hack make it a uint32\n    checksum >>>= 0;\n  }\n  //checksum pos\n  writer.SeekByte(0x000c).WriteUInt32(checksum);\n}\n\n/**\n * Save Version\n * 0x47, 0x0, 0x0, 0x0 = <1.06\n * 0x59, 0x0, 0x0, 0x0 = 1.08 = version\n * 0x5c, 0x0, 0x0, 0x0 = 1.09 = version\n * 0x60, 0x0, 0x0, 0x0 = 1.13c = version\n * 0x62, 0x0, 0x0, 0x0 = 1.2 = version\n * */\nasync function _versionSpecificHeader(version: number) {\n  switch (version) {\n    case 0x60: {\n      return await import(`./versions/default_header`);\n    }\n    default: {\n      return await import(`./versions/default_header`);\n    }\n  }\n}\n","import * as types from \"./types\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { BitWriter } from \"../binary/bitwriter\";\n\nenum ItemType {\n  Armor = 0x01,\n  Shield = 0x02, //treated the same as armor... only here to be able to parse nokkas jsons\n  Weapon = 0x03,\n  Other = 0x04,\n}\n\nenum Quality {\n  Low = 0x01,\n  Normal = 0x02,\n  Superior = 0x03,\n  Magic = 0x04,\n  Set = 0x05,\n  Rare = 0x06,\n  Unique = 0x07,\n  Crafted = 0x08,\n}\n\n// prettier-ignore\n//huffman tree\nconst HUFFMAN = [[[[[\"w\",\"u\"],[[\"8\",[\"y\",[\"5\",[\"j\",[]]]]],\"h\"]],[\"s\",[[\"2\",\"n\"],\"x\"]]],[[[\"c\",[\"k\",\"f\"]],\"b\"],[[\"t\",\"m\"],[\"9\",\"7\"]]]],[\" \",[[[[\"e\",\"d\"],\"p\"],[\"g\",[[[\"z\",\"q\"],\"3\"],[\"v\",\"6\"]]]],[[\"r\",\"l\"],[\"a\",[[\"1\",[\"4\",\"0\"]],[\"i\",\"o\"]]]]]]];\n// prettier-ignore\nconst HUFFMAN_LOOKUP = { \"0\": { \"v\": 223, \"l\": 8 }, \"1\": { \"v\": 31, \"l\": 7 }, \"2\": { \"v\": 12, \"l\": 6 }, \"3\": { \"v\": 91, \"l\": 7 }, \"4\": { \"v\": 95, \"l\": 8 }, \"5\": { \"v\": 104, \"l\": 8 }, \"6\": { \"v\": 123, \"l\": 7 }, \"7\": { \"v\": 30, \"l\": 5 }, \"8\": { \"v\": 8, \"l\": 6 }, \"9\": { \"v\": 14, \"l\": 5 }, \" \": { \"v\": 1, \"l\": 2 }, \"a\": { \"v\": 15, \"l\": 5 }, \"b\": { \"v\": 10, \"l\": 4 }, \"c\": { \"v\": 2, \"l\": 5 }, \"d\": { \"v\": 35, \"l\": 6 }, \"e\": { \"v\": 3, \"l\": 6 }, \"f\": { \"v\": 50, \"l\": 6 }, \"g\": { \"v\": 11, \"l\": 5 }, \"h\": { \"v\": 24, \"l\": 5 }, \"i\": { \"v\": 63, \"l\": 7 }, \"j\": { \"v\": 232, \"l\": 9 }, \"k\": { \"v\": 18, \"l\": 6 }, \"l\": { \"v\": 23, \"l\": 5 }, \"m\": { \"v\": 22, \"l\": 5 }, \"n\": { \"v\": 44, \"l\": 6 }, \"o\": { \"v\": 127, \"l\": 7 }, \"p\": { \"v\": 19, \"l\": 5 }, \"q\": { \"v\": 155, \"l\": 8 }, \"r\": { \"v\": 7, \"l\": 5 }, \"s\": { \"v\": 4, \"l\": 4 }, \"t\": { \"v\": 6, \"l\": 5 }, \"u\": { \"v\": 16, \"l\": 5 }, \"v\": { \"v\": 59, \"l\": 7 }, \"w\": { \"v\": 0, \"l\": 5 }, \"x\": { \"v\": 28, \"l\": 5 }, \"y\": { \"v\": 40, \"l\": 7 }, \"z\": { \"v\": 27, \"l\": 8 } };\n\nexport async function readCharItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\n  char.items = await readItems(reader, char.header.version, constants, config);\n}\n\nexport async function writeCharItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteArray(await writeItems(char.items, char.header.version, constants, config));\n  return writer.ToArray();\n}\n\nexport async function readMercItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\n  char.merc_items = [] as types.IItem[];\n  const header = reader.ReadString(2); //0x0000 [merc item list header = \"jf\"]\n  if (header !== \"jf\") {\n    throw new Error(`Mercenary header 'jf' not found at position ${reader.offset - 2 * 8}`);\n  }\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\n    char.merc_items = await readItems(reader, char.header.version, constants, config);\n  }\n}\n\nexport async function writeMercItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"jf\", 2);\n  if (char.header.merc_id && parseInt(char.header.merc_id, 16) !== 0) {\n    char.merc_items = char.merc_items || [];\n    writer.WriteArray(await writeItems(char.merc_items, char.header.version, constants, config));\n  }\n  return writer.ToArray();\n}\n\nexport async function readGolemItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\n  const header = reader.ReadString(2); //0x0000 [golem item list header = \"kf\"]\n  if (header !== \"kf\") {\n    throw new Error(`Golem header 'kf' not found at position ${reader.offset - 2 * 8}`);\n  }\n  const has_golem = reader.ReadUInt8();\n  if (has_golem === 1) {\n    char.golem_item = await readItem(reader, char.header.version, constants, config);\n  }\n}\n\nexport async function writeGolemItems(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"kf\", 2);\n  if (char.golem_item) {\n    writer.WriteUInt8(1);\n    writer.WriteArray(await writeItem(char.golem_item, char.header.version, constants, config));\n  } else {\n    writer.WriteUInt8(0);\n  }\n  return writer.ToArray();\n}\n\nexport async function readCorpseItems(char: types.ID2S, reader: BitReader, constants: types.IConstantData, config: types.IConfig) {\n  char.corpse_items = [] as types.IItem[];\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\n  if (header !== \"JM\") {\n    throw new Error(`Corpse header 'JM' not found at position ${reader.offset - 2 * 8}`);\n  }\n  char.is_dead = reader.ReadUInt16(); //0x0002 [corpse count]\n  for (let i = 0; i < char.is_dead; i++) {\n    reader.SkipBytes(12); //0x0004 [unk4, x_pos, y_pos]\n    char.corpse_items = char.corpse_items.concat(await readItems(reader, char.header.version, constants, config));\n  }\n}\n\nexport async function writeCorpseItem(char: types.ID2S, constants: types.IConstantData, config: types.IConfig): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"JM\", 2);\n  writer.WriteUInt16(char.is_dead);\n  //json struct doesnt support multiple corpses without modifying it\n  if (char.is_dead) {\n    writer.WriteArray(new Uint8Array(12));\n    char.corpse_items = char.corpse_items || [];\n    writer.WriteArray(await writeItems(char.corpse_items, char.header.version, constants, config));\n  }\n  return writer.ToArray();\n}\n\nexport async function readItems(reader: BitReader, version: number, constants: types.IConstantData, config: types.IConfig) {\n  const items = [] as types.IItem[];\n  const header = reader.ReadString(2); //0x0000 [item list header = 0x4a, 0x4d \"JM\"]\n  if (header !== \"JM\") {\n    throw new Error(`Item list header 'JM' not found at position ${reader.offset - 2 * 8}`);\n  }\n  const count = reader.ReadUInt16(); //0x0002\n  for (let i = 0; i < count; i++) {\n    items.push(await readItem(reader, version, constants, config));\n  }\n  return items;\n}\n\nexport async function writeItems(\n  items: types.IItem[],\n  version: number,\n  constants: types.IConstantData,\n  config: types.IConfig\n): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"JM\", 2);\n  writer.WriteUInt16(items.length);\n  for (let i = 0; i < items.length; i++) {\n    writer.WriteArray(await writeItem(items[i], version, constants, config));\n  }\n  return writer.ToArray();\n}\n\nexport async function readItem(\n  reader: BitReader,\n  version: number,\n  constants: types.IConstantData,\n  config: types.IConfig,\n  parent?: types.IItem\n): Promise<types.IItem> {\n  if (version <= 0x60) {\n    const header = reader.ReadString(2); //0x0000 [item header = 0x4a, 0x4d \"JM\"]\n    if (header !== \"JM\") {\n      throw new Error(`Item header 'JM' not found at position ${reader.offset - 2 * 8}`);\n    }\n  }\n  const item = {} as types.IItem;\n  _readSimpleBits(item, reader, version, constants, config);\n  if (!item.simple_item) {\n    item.id = reader.ReadUInt32(32);\n    item.level = reader.ReadUInt8(7);\n    item.quality = reader.ReadUInt8(4);\n    item.multiple_pictures = reader.ReadBit();\n    if (item.multiple_pictures) {\n      item.picture_id = reader.ReadUInt8(3);\n    }\n    item.class_specific = reader.ReadBit();\n    if (item.class_specific) {\n      item.auto_affix_id = reader.ReadUInt16(11);\n    }\n    switch (item.quality) {\n      case Quality.Low:\n        item.low_quality_id = reader.ReadUInt8(3);\n        break;\n      case Quality.Normal:\n        break;\n      case Quality.Superior:\n        item.file_index = reader.ReadUInt8(3);\n        break;\n      case Quality.Magic:\n        item.magic_prefix = reader.ReadUInt16(11);\n        if (item.magic_prefix)\n          item.magic_prefix_name = constants.magic_prefixes[item.magic_prefix] ? constants.magic_prefixes[item.magic_prefix].n : null;\n        item.magic_suffix = reader.ReadUInt16(11);\n        if (item.magic_suffix)\n          item.magic_suffix_name = constants.magic_suffixes[item.magic_suffix] ? constants.magic_suffixes[item.magic_suffix].n : null;\n        break;\n      case Quality.Set:\n        item.set_id = reader.ReadUInt16(12);\n        item.set_name = constants.set_items[item.set_id] ? constants.set_items[item.set_id].n : null;\n        break;\n      case Quality.Unique:\n        item.unique_id = reader.ReadUInt16(12);\n        item.unique_name = constants.unq_items[item.unique_id] ? constants.unq_items[item.unique_id].n : null;\n        break;\n      case Quality.Rare:\n      case Quality.Crafted:\n        item.rare_name_id = reader.ReadUInt8(8);\n        if (item.rare_name_id) item.rare_name = constants.rare_names[item.rare_name_id] ? constants.rare_names[item.rare_name_id].n : null;\n        item.rare_name_id2 = reader.ReadUInt8(8);\n        if (item.rare_name_id2)\n          item.rare_name2 = constants.rare_names[item.rare_name_id2] ? constants.rare_names[item.rare_name_id2].n : null;\n        item.magical_name_ids = [];\n        for (let i = 0; i < 6; i++) {\n          const prefix = reader.ReadBit();\n          if (prefix === 1) {\n            item.magical_name_ids[i] = reader.ReadUInt16(11);\n          } else {\n            item.magical_name_ids[i] = null;\n          }\n        }\n        break;\n      default:\n        break;\n    }\n    if (item.given_runeword) {\n      item.runeword_id = reader.ReadUInt16(12);\n      //fix delerium on d2gs??? why is this a thing?\n      if (item.runeword_id == 2718) {\n        item.runeword_id = 48;\n      }\n      if (constants.runewords[item.runeword_id]) {\n        item.runeword_name = constants.runewords[item.runeword_id]!.n!;\n      }\n      reader.ReadUInt8(4);\n    }\n\n    if (item.personalized) {\n      const arr = new Uint8Array(16);\n      for (let i = 0; i < arr.length; i++) {\n        if (version == 0x62) {\n          arr[i] = reader.ReadUInt8(8);\n        } else {\n          arr[i] = reader.ReadUInt8(7);\n        }\n        if (arr[i] === 0x00) {\n          break;\n        }\n      }\n      item.personalized_name = new BitReader(arr).ReadString(16).trim().replace(/\\0/g, \"\");\n    }\n\n    //tomes\n    if (item.type === \"tbk\" || item.type == \"ibk\") {\n      reader.ReadUInt8(5);\n    }\n\n    //realm data\n    item.timestamp = reader.ReadUInt8(1);\n\n    if (item.type_id === ItemType.Armor) {\n      item.defense_rating = reader.ReadUInt16(constants.magical_properties[31].sB) - constants.magical_properties[31].sA;\n    }\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Weapon) {\n      item.max_durability = reader.ReadUInt16(constants.magical_properties[73].sB) - constants.magical_properties[73].sA;\n      if (item.max_durability > 0) {\n        item.current_durability = reader.ReadUInt16(constants.magical_properties[72].sB) - constants.magical_properties[72].sA;\n      }\n    }\n\n    if (constants.stackables[item.type]) {\n      item.quantity = reader.ReadUInt16(9);\n    }\n\n    if (item.socketed === 1) {\n      item.total_nr_of_sockets = reader.ReadUInt8(4);\n    }\n\n    /**\n     * 5 bits. any of the 5 bits can be set. if a bit is set that means\n     * means +1 to the set_list_count\n     */\n    let plist_flag = 0;\n    if (item.quality === Quality.Set) {\n      plist_flag = reader.ReadUInt8(5);\n      item.set_list_count = 0;\n      item._unknown_data.plist_flag = plist_flag;\n    }\n\n    //magical properties\n    let magic_attributes = _readMagicProperties(reader, constants);\n    item.magic_attributes = magic_attributes;\n\n    while (plist_flag > 0) {\n      if (plist_flag & 1) {\n        item.set_list_count += 1;\n        magic_attributes = _readMagicProperties(reader, constants);\n        if (item.set_attributes) {\n          item.set_attributes.push(magic_attributes);\n        } else {\n          item.set_attributes = [magic_attributes];\n        }\n      }\n      plist_flag >>>= 1;\n    }\n\n    if (item.given_runeword === 1) {\n      magic_attributes = _readMagicProperties(reader, constants);\n      if (magic_attributes && magic_attributes.length > 0) {\n        item.runeword_attributes = magic_attributes;\n      }\n    }\n  }\n  reader.Align();\n\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\n    item.socketed_items = [];\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\n      item.socketed_items.push(await readItem(reader, version, constants, config, item));\n    }\n  }\n  //console.log(JSON.stringify(item));\n  return item;\n}\n\nexport async function writeItem(\n  item: types.IItem,\n  version: number,\n  constants: types.IConstantData,\n  config: types.IConfig\n): Promise<Uint8Array> {\n  if (item._unknown_data === undefined) {\n    item._unknown_data = {};\n  }\n  if (item.categories === undefined) {\n    item.categories = _GetItemTXT(item, constants)?.c;\n  }\n\n  const writer = new BitWriter();\n  if (version <= 0x60) {\n    writer.WriteString(\"JM\", 2);\n  }\n  _writeSimpleBits(writer, version, item, constants, config);\n  if (!item.simple_item) {\n    writer.WriteUInt32(item.id, 32);\n    writer.WriteUInt8(item.level, 7);\n    writer.WriteUInt8(item.quality, 4);\n    writer.WriteUInt8(item.multiple_pictures, 1);\n    if (item.multiple_pictures) {\n      writer.WriteUInt8(item.picture_id, 3);\n    }\n    writer.WriteUInt8(item.class_specific, 1);\n    if (item.class_specific === 1) {\n      writer.WriteUInt16(item.auto_affix_id || 0, 11);\n    }\n    switch (item.quality) {\n      case Quality.Low:\n        writer.WriteUInt8(item.low_quality_id, 3);\n        break;\n      case Quality.Normal:\n        break;\n      case Quality.Superior:\n        writer.WriteUInt8(item.file_index || 0, 3);\n        break;\n      case Quality.Magic:\n        writer.WriteUInt16(item.magic_prefix, 11);\n        writer.WriteUInt16(item.magic_suffix, 11);\n        break;\n      case Quality.Set:\n        writer.WriteUInt16(item.set_id, 12);\n        break;\n      case Quality.Unique:\n        writer.WriteUInt16(item.unique_id, 12);\n        break;\n      case Quality.Rare:\n      case Quality.Crafted:\n        writer.WriteUInt8(item.rare_name_id !== undefined ? item.rare_name_id : _lookupRareId(item.rare_name, constants), 8);\n        writer.WriteUInt8(item.rare_name_id2 !== undefined ? item.rare_name_id2 : _lookupRareId(item.rare_name2, constants), 8);\n        for (let i = 0; i < 6; i++) {\n          const magical_name_id = item.magical_name_ids[i];\n          if (magical_name_id) {\n            writer.WriteBit(1);\n            writer.WriteUInt16(magical_name_id, 11);\n          } else {\n            writer.WriteBit(0);\n          }\n        }\n        break;\n      default:\n        break;\n    }\n\n    if (item.given_runeword) {\n      //fix delerium on d2gs??? why is this a thing?\n      let runeword_id = item.runeword_id;\n      if (runeword_id == 2718) {\n        runeword_id = 48;\n      }\n      writer.WriteUInt16(runeword_id, 12);\n      writer.WriteUInt8(5, 4); //always 5?\n    }\n\n    if (item.personalized) {\n      const name = item.personalized_name.substring(0, 16);\n      for (let i = 0; i < name.length; i++) {\n        if (version == 0x62) {\n          writer.WriteUInt8(name.charCodeAt(i), 8);\n        } else {\n          writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\n        }\n      }\n      writer.WriteUInt8(0x00, version == 0x62 ? 8 : 7);\n    }\n\n    if (item.type === \"tbk\") {\n      writer.WriteUInt8(0, 5);\n    } else if (item.type === \"ibk\") {\n      writer.WriteUInt8(1, 5);\n    }\n\n    writer.WriteUInt8(item.timestamp, 1);\n\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Shield) {\n      writer.WriteUInt16(item.defense_rating + constants.magical_properties[31].sA, constants.magical_properties[31].sB);\n    }\n\n    if (item.type_id === ItemType.Armor || item.type_id === ItemType.Shield || item.type_id === ItemType.Weapon) {\n      writer.WriteUInt16(item.max_durability || 0, constants.magical_properties[73].sB);\n      if (item.max_durability > 0) {\n        writer.WriteUInt16(item.current_durability, constants.magical_properties[72].sB);\n      }\n    }\n\n    if (constants.stackables[item.type]) {\n      writer.WriteUInt16(item.quantity, 9);\n    }\n\n    if (item.socketed === 1) {\n      writer.WriteUInt8(item.total_nr_of_sockets, 4);\n    }\n\n    if (item.quality === Quality.Set) {\n      const set_attribute_count = item.set_attributes != null ? item.set_attributes.length : 0;\n      //reduced by -1 removed as this seems to be wrong\n      const plist_flag = (1 << set_attribute_count) - 1;\n      writer.WriteUInt8(item._unknown_data.plist_flag || plist_flag, 5);\n    }\n\n    _writeMagicProperties(writer, item.magic_attributes, constants);\n    if (item.set_attributes && item.set_attributes.length > 0) {\n      for (let i = 0; i < item.set_attributes.length; i++) {\n        _writeMagicProperties(writer, item.set_attributes[i], constants);\n      }\n    }\n\n    if (item.given_runeword === 1) {\n      _writeMagicProperties(writer, item.runeword_attributes, constants);\n    }\n  }\n\n  writer.Align();\n\n  if (item.nr_of_items_in_sockets > 0 && item.simple_item === 0) {\n    for (let i = 0; i < item.nr_of_items_in_sockets; i++) {\n      writer.WriteArray(await writeItem(item.socketed_items[i], version, constants, config));\n    }\n  }\n  return writer.ToArray();\n}\n\nfunction _readSimpleBits(item: types.IItem, reader: BitReader, version: number, constants: types.IConstantData, config: types.IConfig) {\n  //init so we do not have npe's\n  item._unknown_data = {};\n  //1.10-1.14d\n  //[flags:32][version:10][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:32])([sockets:3])\n  //1.15\n  //[flags:32][version:3][mode:3]([invloc:4][x:4][y:4][page:3])([itemcode:variable])([sockets:3])\n  item._unknown_data.b0_3 = reader.ReadBitArray(4);\n  item.identified = reader.ReadBit();\n  item._unknown_data.b5_10 = reader.ReadBitArray(6);\n  item.socketed = reader.ReadBit();\n  item._unknown_data.b12 = reader.ReadBitArray(1);\n  item.new = reader.ReadBit();\n  item._unknown_data.b14_15 = reader.ReadBitArray(2);\n  item.is_ear = reader.ReadBit();\n  item.starter_item = reader.ReadBit();\n  item._unknown_data.b18_20 = reader.ReadBitArray(3);\n  item.simple_item = reader.ReadBit();\n  item.ethereal = reader.ReadBit();\n  item._unknown_data.b23 = reader.ReadBitArray(1);\n  item.personalized = reader.ReadBit();\n  item._unknown_data.b25 = reader.ReadBitArray(1);\n  item.given_runeword = reader.ReadBit();\n  item._unknown_data.b27_31 = reader.ReadBitArray(5);\n\n  if (version <= 0x60) {\n    item.version = reader.ReadUInt16(10).toString(10);\n  } else if (version >= 0x61) {\n    item.version = reader.ReadUInt16(3).toString(2);\n  }\n  item.location_id = reader.ReadUInt8(3);\n  item.equipped_id = reader.ReadUInt8(4);\n  item.position_x = reader.ReadUInt8(4);\n  item.position_y = reader.ReadUInt8(4);\n  item.alt_position_id = reader.ReadUInt8(3);\n  if (item.is_ear) {\n    const clazz = reader.ReadUInt8(3);\n    const level = reader.ReadUInt8(7);\n    const arr = new Uint8Array(15);\n    for (let i = 0; i < arr.length; i++) {\n      arr[i] = reader.ReadUInt8(7);\n      if (arr[i] === 0x00) {\n        break;\n      }\n    }\n    const name = new BitReader(arr).ReadString(15).trim().replace(/\\0/g, \"\");\n    item.ear_attributes = {\n      class: clazz,\n      level: level,\n      name: name,\n    } as types.IEarAttributes;\n  } else {\n    if (version <= 0x60) {\n      item.type = reader.ReadString(4);\n    } else if (version >= 0x61) {\n      item.type = \"\";\n      //props to d07riv\n      //https://github.com/d07RiV/d07riv.github.io/blob/master/d2r.html#L11-L20\n      for (let i = 0; i < 4; i++) {\n        let node = HUFFMAN as any;\n        do {\n          node = node[reader.ReadBit()];\n        } while (Array.isArray(node));\n        item.type += node;\n      }\n    }\n    item.type = item.type.trim().replace(/\\0/g, \"\");\n    let details = _GetItemTXT(item, constants);\n    item.categories = details?.c;\n    if (item?.categories.includes(\"Any Armor\")) {\n      item.type_id = ItemType.Armor;\n    } else if (item?.categories.includes(\"Weapon\")) {\n      item.type_id = ItemType.Weapon;\n      details = constants.weapon_items[item.type];\n    } else {\n      item.type_id = ItemType.Other;\n    }\n\n    let bits = item.simple_item ? 1 : 3;\n    if (item.categories?.includes(\"Quest\")) {\n      item.quest_difficulty = reader.ReadUInt16(constants.magical_properties[356].sB) - constants.magical_properties[356].sA;\n      bits = 1;\n    }\n    item.nr_of_items_in_sockets = reader.ReadUInt8(bits);\n  }\n}\n\nfunction _lookupRareId(name: string, constants: types.IConstantData): number {\n  //some inconsistencies with txt data and nokka. so have to hack it with startsWith\n  return constants.rare_names.findIndex(\n    (k) => k && (k.n.toLowerCase().startsWith(name.toLowerCase()) || name.toLowerCase().startsWith(k.n.toLowerCase()))\n  );\n}\n\nfunction _writeSimpleBits(writer: BitWriter, version: number, item: types.IItem, constants: types.IConstantData, config: types.IConfig) {\n  writer.WriteBits(item._unknown_data.b0_3 || new Uint8Array(4), 4);\n  writer.WriteBit(item.identified);\n  writer.WriteBits(item._unknown_data.b5_10 || new Uint8Array(6), 6);\n  writer.WriteBit(item.socketed);\n  writer.WriteBits(item._unknown_data.b12 || new Uint8Array(1), 1);\n  writer.WriteBit(item.new);\n  writer.WriteBits(item._unknown_data.b14_15 || new Uint8Array(2), 2);\n  writer.WriteBit(item.is_ear);\n  writer.WriteBit(item.starter_item);\n  writer.WriteBits(item._unknown_data.b18_20 || new Uint8Array(3), 3);\n  writer.WriteBit(item.simple_item);\n  writer.WriteBit(item.ethereal);\n  writer.WriteBits(item._unknown_data.b23 || new Uint8Array([1]), 1); //always 1? IFLAG_JUSTSAVED\n  writer.WriteBit(item.personalized);\n  writer.WriteBits(item._unknown_data.b25 || new Uint8Array(1), 1); //IFLAG_LOWQUALITY\n  writer.WriteBit(item.given_runeword);\n  writer.WriteBits(item._unknown_data.b27_31 || new Uint8Array(5), 5);\n\n  const itemVersion = item.version != null ? item.version : \"101\";\n  if (version <= 0x60) {\n    // 0 = pre-1.08; 1 = 1.08/1.09 normal; 2 = 1.10 normal; 100 = 1.08/1.09 expansion; 101 = 1.10 expansion\n    writer.WriteUInt16(parseInt(itemVersion, 10), 10);\n  } else if (version >= 0x61) {\n    writer.WriteUInt16(parseInt(itemVersion, 2), 3);\n  }\n  writer.WriteUInt8(item.location_id, 3);\n  writer.WriteUInt8(item.equipped_id, 4);\n  writer.WriteUInt8(item.position_x, 4);\n  writer.WriteUInt8(item.position_y, 4);\n  writer.WriteUInt8(item.alt_position_id, 3);\n  if (item.is_ear) {\n    writer.WriteUInt8(item.ear_attributes.class, 3);\n    writer.WriteUInt8(item.ear_attributes.level, 7);\n    const name = item.ear_attributes.name.substring(0, 15);\n    for (let i = 0; i < name.length; i++) {\n      writer.WriteUInt8(name.charCodeAt(i) & 0x7f, 7);\n    }\n    writer.WriteUInt8(0x00, 7);\n  } else {\n    const t = item.type.padEnd(4, \" \");\n    if (version <= 0x60) {\n      writer.WriteString(t, 4);\n    } else {\n      for (const c of t) {\n        const n = HUFFMAN_LOOKUP[c];\n        writer.WriteUInt16(n.v, n.l);\n      }\n    }\n\n    let bits = item.simple_item ? 1 : 3;\n    if (item.categories?.includes(\"Quest\")) {\n      const difficulty = item.quest_difficulty || 0;\n      writer.WriteUInt16(difficulty + constants.magical_properties[356].sA, constants.magical_properties[356].sB);\n      bits = 1;\n    }\n    writer.WriteUInt8(item.nr_of_items_in_sockets, bits);\n  }\n}\n\nexport function _readMagicProperties(reader: BitReader, constants: types.IConstantData) {\n  let id = reader.ReadUInt16(9);\n  const magic_attributes = [];\n  while (id != 0x1ff) {\n    const values = [];\n    if (id > constants.magical_properties.length) {\n      throw new Error(`Invalid Stat Id: ${id} at position ${reader.offset - 9}`);\n    }\n    const num_of_properties = constants.magical_properties[id].np || 1;\n    for (let i = 0; i < num_of_properties; i++) {\n      const prop = constants.magical_properties[id + i];\n      if (prop == null) {\n        throw new Error(`Cannot find Magical Property for id: ${id} at position ${reader.offset}`);\n      }\n      if (prop.sP) {\n        let param = reader.ReadUInt16(prop.sP);\n        switch (prop.dF) {\n          case 14: //+skill to skilltab\n            values.push(param & 0x7);\n            param = (param >> 3) & 0x1fff;\n            break;\n          default:\n            break;\n        }\n        //encode\n        switch (prop.e) {\n          case 1:\n            //throw new Error(`Unimplemented encoding: ${prop.encode}`);\n            break;\n          case 2: //chance to cast\n          case 3: //charges\n            values.push(param & 0x3f); //skill level\n            param = (param >> 6) & 0x3ff; //skll id\n            break;\n          default:\n            break;\n        }\n        values.push(param);\n      }\n      if (!prop.sB) {\n        throw new Error(`Save Bits is undefined for stat: ${id}:${prop.s} at position ${reader.offset}`);\n      }\n      let v = reader.ReadUInt16(prop.sB);\n      if (prop.sA) {\n        v -= prop.sA;\n      }\n      switch (prop.e) {\n        case 3:\n          values.push(v & 0xff); // current charges\n          values.push((v >> 8) & 0xff); //max charges\n          break;\n        default:\n          values.push(v);\n          break;\n      }\n    }\n    magic_attributes.push({\n      id: id,\n      values: values,\n      name: constants.magical_properties[id].s,\n    } as types.IMagicProperty);\n    id = reader.ReadUInt16(9);\n  }\n  return magic_attributes;\n}\n\nexport function _writeMagicProperties(writer: BitWriter, properties: types.IMagicProperty[], constants: types.IConstantData) {\n  if (properties) {\n    for (let i = 0; i < properties.length; i++) {\n      const property = properties[i];\n      let valueIdx = 0;\n      writer.WriteUInt16(property.id, 9);\n      const num_of_properties = constants.magical_properties[property!.id].np || 1;\n      for (let j = 0; j < num_of_properties; j++) {\n        const prop = constants.magical_properties[property!.id + j];\n        if (prop == null) {\n          throw new Error(`Cannot find Magical Property for id: ${property.id}`);\n        }\n        if (prop.sP) {\n          let param = property.values[valueIdx++]!;\n          switch (prop.dF) {\n            case 14: //+skill to skilltab\n              param |= (property.values[valueIdx++]! & 0x1fff) << 3;\n              break;\n            default:\n              break;\n          }\n          //encode\n          switch (prop.e) {\n            case 1:\n              //throw new Error(`Unimplemented encoding: ${prop.encode}`);\n              break;\n            case 2: //chance to cast\n            case 3: //charges\n              param |= (property.values[valueIdx++]! & 0x3ff) << 6;\n              break;\n            default:\n              break;\n          }\n          writer.WriteUInt32(param, prop.sP);\n        }\n        let v = property.values[valueIdx++]!;\n        if (prop.sA) {\n          v += prop.sA;\n        }\n        switch (prop.e) {\n          case 3:\n            v |= (property.values[valueIdx++]! & 0xff) << 8;\n            break;\n          default:\n            break;\n        }\n        if (!prop.sB) {\n          throw new Error(`Save Bits is undefined for stat: ${property.id}:${prop.s}`);\n        }\n        writer.WriteUInt32(v, prop.sB);\n      }\n    }\n  }\n  writer.WriteUInt16(0x1ff, 9);\n}\n\nfunction _GetItemTXT(item: types.IItem, constants: types.IConstantData): any {\n  if (constants.armor_items[item.type]) {\n    return constants.armor_items[item.type];\n  } else if (constants.weapon_items[item.type]) {\n    return constants.weapon_items[item.type];\n  } else if (constants.other_items[item.type]) {\n    return constants.other_items[item.type];\n  }\n}\n","import * as types from \"./types\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { BitWriter } from \"../binary/bitwriter\";\n\nexport async function readSkills(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\n  char.skills = [] as types.ISkill[];\n  const offset = SkillOffset[<string>char.header.class];\n  const header = reader.ReadString(2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\n  if (header !== \"if\") {\n    throw new Error(`Skills header 'if' not found at position ${reader.offset - 2 * 8}`);\n  }\n  for (let i = 0; i < 30; i++) {\n    const id = offset + i;\n    char.skills.push({\n      id: id,\n      points: reader.ReadUInt8(),\n      name: constants.skills[id].s,\n    } as types.ISkill);\n  }\n}\n\nexport async function writeSkills(char: types.ID2S, constants: types.IConstantData): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteString(\"if\", 2); //0x0000 [skills header = 0x69, 0x66 \"if\"]\n  //probably array length checking/sorting of skills by id...\n  for (let i = 0; i < 30; i++) {\n    writer.WriteUInt8(char.skills[i].points);\n  }\n  return writer.ToArray();\n}\n\ninterface ISkillOffset {\n  [key: string]: number;\n}\n\nconst SkillOffset: ISkillOffset = {\n  Amazon: 6,\n  Sorceress: 36,\n  Necromancer: 66,\n  Paladin: 96,\n  Barbarian: 126,\n  Druid: 221,\n  Assassin: 251,\n};\n","import * as types from \"./types\";\nimport { BitWriter } from \"../binary/bitwriter\";\nimport * as items from \"./items\";\nimport { enhanceItems } from \"./attribute_enhancer\";\nimport { BitReader } from \"../binary/bitreader\";\nimport { config } from \"chai\";\n\nconst defaultConfig = {\n  extendedStash: false,\n} as types.IConfig;\n\nexport async function readStash(\n  buffer: Uint8Array,\n  constants: types.IConstantData,\n  version: number,\n  userConfig?: types.IConfig\n): Promise<types.IStash> {\n  const stash = {} as types.IStash;\n  const reader = new BitReader(buffer);\n  const config = Object.assign(defaultConfig, userConfig);\n  const firstHeader = reader.ReadUInt32();\n  reader.SeekByte(0);\n  if (firstHeader == 0xaa55aa55) {\n    stash.pages = [];\n    let pageCount = 0;\n    while (reader.offset < reader.bits.length) {\n      pageCount++;\n      await readStashHeader(stash, reader);\n      await readStashPart(stash, reader, version, constants);\n    }\n    stash.pageCount = pageCount;\n  } else {\n    await readStashHeader(stash, reader);\n    await readStashPages(stash, reader, version, constants);\n  }\n  return stash;\n}\n\nasync function readStashHeader(stash: types.IStash, reader: BitReader) {\n  const header = reader.ReadUInt32();\n  switch (header) {\n    // Resurrected\n    case 0xaa55aa55:\n      stash.type = types.EStashType.shared;\n      stash.hardcore = reader.ReadUInt32() == 0;\n      stash.version = reader.ReadUInt32().toString();\n      stash.sharedGold = reader.ReadUInt32();\n      reader.ReadUInt32(); // size of the sector\n      reader.SkipBytes(44); // empty\n      break;\n    // LoD\n    case 0x535353: // SSS\n    case 0x4d545343: // CSTM\n      stash.version = reader.ReadString(2);\n      if (stash.version !== \"01\" && stash.version !== \"02\") {\n        throw new Error(`unkown stash version ${stash.version} at position ${reader.offset - 2 * 8}`);\n      }\n\n      stash.type = header === 0x535353 ? types.EStashType.shared : types.EStashType.private;\n\n      if (stash.type === types.EStashType.shared && stash.version == \"02\") {\n        stash.sharedGold = reader.ReadUInt32();\n      }\n\n      if (stash.type === types.EStashType.private) {\n        reader.ReadUInt32();\n        stash.sharedGold = 0;\n      }\n\n      stash.pageCount = reader.ReadUInt32();\n      break;\n    default:\n      debugger;\n      throw new Error(\n        `shared stash header 'SSS' / 0xAA55AA55 / private stash header 'CSTM' not found at position ${reader.offset - 3 * 8}`\n      );\n  }\n}\n\nasync function readStashPages(stash: types.IStash, reader: BitReader, version: number, constants: types.IConstantData) {\n  stash.pages = [];\n  for (let i = 0; i < stash.pageCount; i++) {\n    await readStashPage(stash, reader, version, constants);\n  }\n}\n\nasync function readStashPage(stash: types.IStash, reader: BitReader, version: number, constants: types.IConstantData) {\n  const page: types.IStashPage = {\n    items: [],\n    name: \"\",\n    type: 0,\n  };\n  const header = reader.ReadString(2);\n  if (header !== \"ST\") {\n    throw new Error(`can not read stash page header ST at position ${reader.offset - 2 * 8}`);\n  }\n\n  page.type = reader.ReadUInt32();\n\n  page.name = reader.ReadNullTerminatedString();\n  page.items = await items.readItems(reader, version, constants, defaultConfig);\n  enhanceItems(page.items, constants, 1);\n  stash.pages.push(page);\n}\n\nasync function readStashPart(stash: types.IStash, reader: BitReader, version: number, constants: types.IConstantData) {\n  const page: types.IStashPage = {\n    items: [],\n    name: \"\",\n    type: 0,\n  };\n  page.items = await items.readItems(reader, version, constants, defaultConfig);\n  enhanceItems(page.items, constants, 1);\n  stash.pages.push(page);\n}\n\nexport async function writeStash(\n  data: types.IStash,\n  constants: types.IConstantData,\n  version: number,\n  userConfig?: types.IConfig\n): Promise<Uint8Array> {\n  const config = Object.assign(defaultConfig, userConfig);\n  const writer = new BitWriter();\n  if (version == 0x62) {\n    for(const page of data.pages) {\n      writer.WriteArray(await writeStashSection(data, page, constants, config));\n    }\n  } else {\n    writer.WriteArray(await writeStashHeader(data));\n    writer.WriteArray(await writeStashPages(data, version, constants, config));\n  }\n  return writer.ToArray();\n}\n\nasync function writeStashHeader(data: types.IStash): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  if (data.type === types.EStashType.private) {\n    writer.WriteString(\"CSTM\", 4);\n  } else {\n    writer.WriteString(\"SSS\", 4);\n  }\n\n  writer.WriteString(data.version, data.version.length);\n\n  if (data.type === types.EStashType.private) {\n    writer.WriteString(\"\", 4);\n  } else {\n    if (data.version == \"02\") {\n      writer.WriteUInt32(data.sharedGold);\n    }\n  }\n  writer.WriteUInt32(data.pages.length);\n  return writer.ToArray();\n}\n\nasync function writeStashSection(\n  data: types.IStash,\n  page: types.IStashPage,\n  constants: types.IConstantData,\n  userConfig: types.IConfig\n): Promise<Uint8Array> {\n  const writer = new BitWriter();\n  writer.WriteUInt32(0xaa55aa55);\n  writer.WriteUInt32(data.hardcore ? 0 : 1);\n  writer.WriteUInt32(0x62);\n  writer.WriteUInt32(data.sharedGold);\n  writer.WriteUInt32(0); // size of the sector, to be fixed later\n  writer.WriteBytes(new Uint8Array(44).fill(0)); // empty\n  writer.WriteArray(await items.writeItems(page.items, 0x62, constants, userConfig));\n  const size = writer.offset;\n  writer.SeekByte(16);\n  writer.WriteUInt32(Math.ceil(size / 8));\n  return writer.ToArray();\n}\n\nasync function writeStashPages(\n  data: types.IStash,\n  version: number,\n  constants: types.IConstantData,\n  config: types.IConfig\n): Promise<Uint8Array> {\n  const writer = new BitWriter();\n\n  for (let i = 0; i < data.pages.length; i++) {\n    writer.WriteArray(await writeStashPage(data.pages[i], version, constants, config));\n  }\n\n  return writer.ToArray();\n}\n\nasync function writeStashPage(\n  data: types.IStashPage,\n  version: number,\n  constants: types.IConstantData,\n  config: types.IConfig\n): Promise<Uint8Array> {\n  const writer = new BitWriter();\n\n  writer.WriteString(\"ST\", 2);\n  writer.WriteUInt32(data.type);\n\n  writer.WriteString(data.name, data.name.length + 1);\n  writer.WriteArray(await items.writeItems(data.items, version, constants, config));\n\n  return writer.ToArray();\n}\n","//todo define types for these\nexport interface IConfig {\n  extendedStash?: boolean;\n  sortProperties?: boolean;\n}\n\nexport interface IConstantData {\n  classes: any[];\n  skills: any[];\n  magic_prefixes: any[];\n  magic_suffixes: any[];\n  rare_names: any[];\n  armor_items: any;\n  weapon_items: any;\n  other_items: any;\n  stackables: any;\n  properties: any;\n  magical_properties: any[];\n  runewords: any[];\n  set_items: any[];\n  unq_items: any[];\n}\n\nexport interface ID2S {\n  header: IHeader;\n  attributes: IAttributes;\n  item_bonuses: IMagicProperty[];\n  skills: ISkill[]; //Skill\n  items: IItem[]; //Item\n  corpse_items: IItem[];\n  merc_items: IItem[];\n  golem_item: IItem;\n  is_dead: number;\n}\n\nexport interface IAttributes {\n  [key: string]: number;\n}\n\nexport interface IMenuAppearance {\n  graphic: number;\n  tint: number;\n}\nexport interface ICharMenuAppearance {\n  //composite.txt\n  head: IMenuAppearance;\n  torso: IMenuAppearance;\n  legs: IMenuAppearance;\n  right_arm: IMenuAppearance;\n  left_arm: IMenuAppearance;\n  right_hand: IMenuAppearance;\n  left_hand: IMenuAppearance;\n  shield: IMenuAppearance;\n  special1: IMenuAppearance; //right shoulder\n  special2: IMenuAppearance; //left shoulder\n  special3: IMenuAppearance;\n  special4: IMenuAppearance;\n  special5: IMenuAppearance;\n  special6: IMenuAppearance;\n  special7: IMenuAppearance;\n  special8: IMenuAppearance;\n}\n\nexport interface IDifficulty {\n  Normal: number;\n  Nightmare: number;\n  Hell: number;\n}\n\nexport interface INPC {\n  intro: boolean;\n  congrats: boolean;\n}\n\nexport interface INPCS {\n  warriv_act_ii: INPC;\n  charsi: INPC;\n  warriv_act_i: INPC;\n  kashya: INPC;\n  akara: INPC;\n  gheed: INPC;\n  greiz: INPC;\n  jerhyn: INPC;\n  meshif_act_ii: INPC;\n  geglash: INPC;\n  lysnader: INPC;\n  fara: INPC;\n  drogan: INPC;\n  alkor: INPC;\n  hratli: INPC;\n  ashera: INPC;\n  cain_act_iii: INPC;\n  elzix: INPC;\n  malah: INPC;\n  anya: INPC;\n  natalya: INPC;\n  meshif_act_iii: INPC;\n  ormus: INPC;\n  cain_act_v: INPC;\n  qualkehk: INPC;\n  nihlathak: INPC;\n}\n\nexport interface IQuest {\n  unk15: boolean;\n  unk14: boolean;\n  done_recently: boolean; //13\n  closed: boolean; //12\n  unk11: boolean;\n  unk10: boolean;\n  unk9: boolean;\n  unk8: boolean;\n  consumed_scroll: boolean; //7\n  unk6: boolean;\n  unk5: boolean;\n  unk4: boolean;\n  unk3: boolean;\n  is_received: boolean; //2\n  is_completed: boolean; //1\n  is_requirement_completed: boolean; //0\n}\n\nexport interface IActIQuests {\n  introduced: boolean;\n  den_of_evil: IQuest;\n  sisters_burial_grounds: IQuest;\n  tools_of_the_trade: IQuest;\n  the_search_for_cain: IQuest;\n  the_forgotten_tower: IQuest;\n  sisters_to_the_slaughter: IQuest;\n  completed: boolean;\n}\n\nexport interface IActIWaypoints {\n  rogue_encampement: boolean;\n  cold_plains: boolean;\n  stony_field: boolean;\n  dark_woods: boolean;\n  black_marsh: boolean;\n  outer_cloister: boolean;\n  jail_lvl_1: boolean;\n  inner_cloister: boolean;\n  catacombs_lvl_2: boolean;\n}\n\nexport interface IActIIQuests {\n  introduced: boolean;\n  radaments_lair: IQuest;\n  the_horadric_staff: IQuest;\n  tainted_sun: IQuest;\n  arcane_sanctuary: IQuest;\n  the_summoner: IQuest;\n  the_seven_tombs: IQuest;\n  completed: boolean;\n}\n\nexport interface IActIIWaypoints {\n  lut_gholein: boolean;\n  sewers_lvl_2: boolean;\n  dry_hills: boolean;\n  halls_of_the_dead_lvl_2: boolean;\n  far_oasis: boolean;\n  lost_city: boolean;\n  palace_cellar_lvl_1: boolean;\n  arcane_sanctuary: boolean;\n  canyon_of_the_magi: boolean;\n}\n\nexport interface IActIIIQuests {\n  introduced: boolean;\n  lam_esens_tome: IQuest;\n  khalims_will: IQuest;\n  blade_of_the_old_religion: IQuest;\n  the_golden_bird: IQuest;\n  the_blackened_temple: IQuest;\n  the_guardian: IQuest;\n  completed: boolean;\n}\n\nexport interface IActIIIWaypoints {\n  kurast_docks: boolean;\n  spider_forest: boolean;\n  great_marsh: boolean;\n  flayer_jungle: boolean;\n  lower_kurast: boolean;\n  kurast_bazaar: boolean;\n  upper_kurast: boolean;\n  travincal: boolean;\n  durance_of_hate_lvl_2: boolean;\n}\n\nexport interface IActIVQuests {\n  introduced: boolean;\n  the_fallen_angel: IQuest;\n  terrors_end: IQuest;\n  hellforge: IQuest;\n  completed: boolean;\n}\n\nexport interface IActIVWaypoints {\n  the_pandemonium_fortress: boolean;\n  city_of_the_damned: boolean;\n  river_of_flame: boolean;\n}\n\nexport interface IActVQuests {\n  introduced: boolean;\n  siege_on_harrogath: IQuest;\n  rescue_on_mount_arreat: IQuest;\n  prison_of_ice: IQuest;\n  betrayal_of_harrogath: IQuest;\n  rite_of_passage: IQuest;\n  eve_of_destruction: IQuest;\n  completed: boolean;\n}\n\nexport interface IActVWaypoints {\n  harrogath: boolean;\n  frigid_highlands: boolean;\n  arreat_plateau: boolean;\n  crystalline_passage: boolean;\n  halls_of_pain: boolean;\n  glacial_trail: boolean;\n  frozen_tundra: boolean;\n  the_ancients_way: boolean;\n  worldstone_keep_lvl_2: boolean;\n}\n\nexport interface IQuests {\n  act_i: IActIQuests;\n  act_ii: IActIIQuests;\n  act_iii: IActIIIQuests;\n  act_iv: IActIVQuests;\n  act_v: IActVQuests;\n}\n\nexport interface IWaypoints {\n  act_i: IActIWaypoints;\n  act_ii: IActIIWaypoints;\n  act_iii: IActIIIWaypoints;\n  act_iv: IActIVWaypoints;\n  act_v: IActVWaypoints;\n}\n\nexport interface INPCData {\n  normal: INPCS;\n  nm: INPCS;\n  hell: INPCS;\n}\n\nexport interface IWaypointData {\n  normal: IWaypoints;\n  nm: IWaypoints;\n  hell: IWaypoints;\n}\n\nexport interface IHeader {\n  identifier: string;\n  checksum: string;\n  name: string;\n  status: IStatus;\n  class: string;\n  created: number;\n  last_played: number;\n  menu_appearance: ICharMenuAppearance;\n  left_skill: string;\n  right_skill: string;\n  left_swap_skill: string;\n  right_swap_skill: string;\n  merc_id: string;\n  assigned_skills: string[];\n  quests_normal: IQuests;\n  quests_nm: IQuests;\n  quests_hell: IQuests;\n  waypoints: IWaypointData;\n  npcs: INPCData;\n  version: number;\n  filesize: number;\n  active_arms: number;\n  progression: number;\n  level: number;\n  difficulty: IDifficulty;\n  map_id: number;\n  dead_merc: number;\n  merc_name_id: number;\n  merc_type: number;\n  merc_experience: number;\n}\n\nexport interface IStatus {\n  expansion: boolean;\n  died: boolean;\n  hardcore: boolean;\n  ladder: boolean;\n}\n\nexport interface ISkill {\n  id: number;\n  points: number;\n  name: string;\n}\n\nexport interface IItem {\n  identified: number;\n  socketed: number;\n  new: number;\n  is_ear: number;\n  starter_item: number;\n  simple_item: number;\n  ethereal: number;\n  personalized: number;\n  personalized_name: string;\n  given_runeword: number;\n  version: string;\n  location_id: number;\n  equipped_id: number;\n  position_x: number;\n  position_y: number;\n  alt_position_id: number;\n  type: string;\n  type_id: number;\n  type_name: string;\n  quest_difficulty: number;\n  nr_of_items_in_sockets: number;\n  id: number;\n  level: number;\n  quality: number;\n  multiple_pictures: number;\n  picture_id: number;\n  class_specific: number;\n  low_quality_id: number;\n  timestamp: number;\n  ear_attributes: IEarAttributes;\n  defense_rating: number;\n  max_durability: number;\n  current_durability: number;\n  total_nr_of_sockets: number;\n  quantity: number;\n  magic_prefix: number;\n  magic_prefix_name: string;\n  magic_suffix: number;\n  magic_suffix_name: string;\n  runeword_id: number;\n  runeword_name: string;\n  runeword_attributes: IMagicProperty[];\n  set_id: number;\n  set_name: string;\n  set_list_count: number;\n  set_attributes: IMagicProperty[][];\n  set_attributes_num_req: number;\n  set_attributes_ids_req: number;\n  rare_name: string;\n  rare_name2: string;\n  magical_name_ids: number[] | null[];\n  unique_id: number;\n  unique_name: string;\n  magic_attributes: IMagicProperty[];\n  combined_magic_attributes: IMagicProperty[];\n  socketed_items: IItem[];\n  base_damage: IWeaponDamage;\n  reqstr: number;\n  reqdex: number;\n  inv_width: number;\n  inv_height: number;\n  inv_file: number;\n  inv_transform: number;\n  transform_color: string;\n  item_quality: EItemQuality;\n  categories: string[];\n  file_index: number;\n  auto_affix_id: number;\n  _unknown_data: {\n    b0_3?: Uint8Array;\n    b5_10?: Uint8Array;\n    b12?: Uint8Array;\n    b14_15?: Uint8Array;\n    b18_20?: Uint8Array;\n    b23?: Uint8Array;\n    b25?: Uint8Array;\n    b27_31?: Uint8Array;\n    plist_flag?: number;\n  };\n  rare_name_id: number;\n  rare_name_id2: number;\n  displayed_magic_attributes: IMagicProperty[];\n  displayed_runeword_attributes: IMagicProperty[];\n  displayed_combined_magic_attributes: IMagicProperty[];\n}\n\nexport interface IWeaponDamage {\n  mindam: number;\n  maxdam: number;\n  twohandmindam: number;\n  twohandmaxdam: number;\n}\n\nexport interface IEarAttributes {\n  class: number;\n  level: number;\n  name: string;\n}\n\nexport interface IMagicProperty {\n  id: number;\n  name: string;\n  values: number[];\n  description: string;\n  visible: boolean;\n  op_value: number;\n  op_stats: string[];\n}\n\nexport enum EStashType {\n  shared,\n  private,\n}\n\nexport interface IStash {\n  version: string;\n  type: EStashType;\n  pageCount: number;\n  sharedGold: number;\n  hardcore: boolean;\n  pages: IStashPage[];\n}\n\nexport interface IStashPage {\n  name: string;\n  type: number;\n  items: IItem[];\n}\n\nexport enum EItemQuality {\n  normal,\n  exceptional,\n  elite,\n}\n","import * as types from \"../types\";\nimport { BitReader } from \"../../binary/bitreader\";\nimport { BitWriter } from \"../../binary/bitwriter\";\n\nconst difficulties = [\"normal\", \"nm\", \"hell\"];\n\nexport function readHeader(char: types.ID2S, reader: BitReader, constants: types.IConstantData) {\n  char.header.filesize = reader.ReadUInt32(); //0x0008\n  char.header.checksum = reader.ReadUInt32().toString(16).padStart(8, \"0\"); //0x000c\n  reader.SkipBytes(4); //0x0010\n  if (char.header.version == 0x62) {\n    reader.SeekByte(267);\n  }\n  char.header.name = reader.ReadString(16).replace(/\\0/g, \"\"); //0x0014\n  if (char.header.version == 0x62) {\n    reader.SeekByte(36);\n  }\n  char.header.status = _readStatus(reader.ReadUInt8()); //0x0024\n  char.header.progression = reader.ReadUInt8(); //0x0025\n  char.header.active_arms = reader.ReadUInt16(); //0x0026 [unk = 0x0, 0x0]\n  char.header.class = constants.classes[reader.ReadUInt8()]!.n; //0x0028\n  reader.SkipBytes(2); //0x0029 [unk = 0x10, 0x1E]\n  char.header.level = reader.ReadUInt8(); //0x002b\n  char.header.created = reader.ReadUInt32(); //0x002c\n  char.header.last_played = reader.ReadUInt32(); //0x0030\n  reader.SkipBytes(4); //0x0034 [unk = 0xff, 0xff, 0xff, 0xff]\n  char.header.assigned_skills = _readAssignedSkills(reader.ReadArray(64), constants); //0x0038\n  char.header.left_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0078\n  char.header.right_skill = constants.skills[reader.ReadUInt32()]?.s; //0x007c\n  char.header.left_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0080\n  char.header.right_swap_skill = constants.skills[reader.ReadUInt32()]?.s; //0x0084\n  char.header.menu_appearance = _readCharMenuAppearance(reader.ReadArray(32), constants); //0x0088 [char menu appearance]\n  char.header.difficulty = _readDifficulty(reader.ReadArray(3)); //0x00a8\n  char.header.map_id = reader.ReadUInt32(); //0x00ab\n  reader.SkipBytes(2); //0x00af [unk = 0x0, 0x0]\n  char.header.dead_merc = reader.ReadUInt16(); //0x00b1\n  char.header.merc_id = reader.ReadUInt32().toString(16); //0x00b3\n  char.header.merc_name_id = reader.ReadUInt16(); //0x00b7\n  char.header.merc_type = reader.ReadUInt16(); //0x00b9\n  char.header.merc_experience = reader.ReadUInt32(); //0x00bb\n  reader.SkipBytes(144); //0x00bf [unk]\n  reader.SkipBytes(4); //0x014f [quests header identifier = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\n  reader.SkipBytes(4); //0x0153 [version = 0x6, 0x0, 0x0, 0x0]\n  reader.SkipBytes(2); //0x0153 [quests header length = 0x2a, 0x1]\n  char.header.quests_normal = _readQuests(reader.ReadArray(96)); //0x0159\n  char.header.quests_nm = _readQuests(reader.ReadArray(96)); //0x01b9\n  char.header.quests_hell = _readQuests(reader.ReadArray(96)); //0x0219\n  reader.SkipBytes(2); //0x0279 [waypoint header identifier = 0x57, 0x53 \"WS\"]\n  reader.SkipBytes(4); //0x027b [waypoint header version = 0x1, 0x0, 0x0, 0x0]\n  reader.SkipBytes(2); //0x027f [waypoint header length = 0x50, 0x0]\n  char.header.waypoints = _readWaypointData(reader.ReadArray(0x48)); //0x0281\n  reader.SkipBytes(2); //0x02c9 [npc header identifier  = 0x01, 0x77 \".w\"]\n  reader.SkipBytes(2); //0x02ca [npc header length = 0x34]\n  char.header.npcs = _readNPCData(reader.ReadArray(0x30)); //0x02cc\n}\n\nexport function writeHeader(char: types.ID2S, writer: BitWriter, constants: types.IConstantData) {\n  writer\n    .WriteUInt32(0x0) //0x0008 (filesize. needs to be writen after all data)\n    .WriteUInt32(0x0); //0x000c (checksum. needs to be calculated after all data writer)\n\n  if (char.header.version == 0x62) {\n    writer.WriteArray(new Uint8Array(Array(20).fill(0))); // 0x0010\n  } else {\n    writer\n      .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x0010\n      .WriteString(char.header.name, 16); //0x0014\n  }\n\n  writer\n    .WriteArray(_writeStatus(char.header.status)) //0x0024\n    .WriteUInt8(char.header.progression) //0x0025\n    .WriteUInt16(char.header.active_arms) //0x0026\n    .WriteUInt8(_classId(char.header.class, constants)) //0x0028\n    .WriteArray(new Uint8Array([0x10, 0x1e])) //0x0029\n    .WriteUInt8(char.header.level) //0x002b\n    .WriteArray(new Uint8Array([0x00, 0x00, 0x00, 0x00])) //0x002c\n    .WriteUInt32(char.header.last_played) //0x0030\n    .WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff])) //0x0034\n    .WriteArray(_writeAssignedSkills(char.header.assigned_skills, constants)) //0x0038\n    .WriteUInt32(_skillId(char.header.left_skill, constants)) //0x0078\n    .WriteUInt32(_skillId(char.header.right_skill, constants)) //0x007c\n    .WriteUInt32(_skillId(char.header.left_swap_skill, constants)) //0x0080\n    .WriteUInt32(_skillId(char.header.right_swap_skill, constants)) //0x0084\n    .WriteArray(_writeCharMenuAppearance(char.header.menu_appearance, constants)) //0x0088 [char menu appearance]\n    .WriteArray(_writeDifficulty(char.header.difficulty)) //0x00a8\n    .WriteUInt32(char.header.map_id) //0x00ab\n    .WriteArray(new Uint8Array([0x00, 0x00])) //0x00af [unk = 0x0, 0x0]\n    .WriteUInt16(char.header.dead_merc) //0x00b1\n    .WriteUInt32(parseInt(char.header.merc_id, 16)) //0x00b3\n    .WriteUInt16(char.header.merc_name_id) //0x00b7\n    .WriteUInt16(char.header.merc_type) //0x00b9\n    .WriteUInt32(char.header.merc_experience); //0x00bb\n\n  if (char.header.version == 0x62) {\n    writer\n      .WriteArray(new Uint8Array(76)) //0x00bf [unk]\n      .WriteString(char.header.name, 16) //0x010b\n      .WriteArray(new Uint8Array(52)); //0x011b [unk]\n  } else {\n    writer\n      .WriteArray(new Uint8Array(140)) //0x00bf [unk]\n      .WriteUInt32(0x1); //0x014b [unk = 0x1, 0x0, 0x0, 0x0]\n  }\n\n  writer\n    .WriteString(\"Woo!\", 4) //0x014f [quests = 0x57, 0x6f, 0x6f, 0x21 \"Woo!\"]\n    .WriteArray(new Uint8Array([0x06, 0x00, 0x00, 0x00, 0x2a, 0x01])) //0x0153 [unk = 0x6, 0x0, 0x0, 0x0, 0x2a, 0x1]\n    .WriteArray(_writeQuests(char.header.quests_normal)) //0x0159\n    .WriteArray(_writeQuests(char.header.quests_nm)) //0x01b9\n    .WriteArray(_writeQuests(char.header.quests_hell)) //0x0219\n    .WriteString(\"WS\", 2) //0x0279 [waypoint data = 0x57, 0x53 \"WS\"]\n    .WriteArray(new Uint8Array([0x01, 0x00, 0x00, 0x00, 0x50, 0x00])) //0x027b [unk = 0x1, 0x0, 0x0, 0x0, 0x50, 0x0]\n    .WriteArray(_writeWaypointData(char.header.waypoints)) //0x0281\n    .WriteArray(new Uint8Array([0x01, 0x77])) //0x02c9 [npc header = 0x01, 0x77 \".w\"]\n    .WriteUInt16(0x34) //0x02ca [npc struct length]\n    .WriteArray(_writeNPCData(char.header.npcs)); //0x02cc [npc introduction data... unk]\n}\n\nfunction _classId(name: string, constants: types.IConstantData): number {\n  if (!name) return -1;\n  return constants.classes.findIndex((c) => c && c.n == name);\n}\n\nfunction _skillId(name: string, constants: types.IConstantData): number {\n  //default to \"attack\" if empty string or can't find spellname.\n  if (name === \"\") return 0;\n  if (!name) return -1;\n  const idx = constants.skills.findIndex((s) => s && s.s == name);\n  return idx >= 0 ? idx : 0;\n}\n\nfunction _readStatus(byte: number): types.IStatus {\n  const status = {} as types.IStatus;\n  status.hardcore = ((byte >>> 2) & 1) === 1;\n  status.died = ((byte >>> 3) & 1) === 1;\n  status.expansion = ((byte >>> 5) & 1) === 1;\n  status.ladder = ((byte >>> 6) & 1) === 1;\n  return status;\n}\n\nfunction _writeStatus(status: types.IStatus): Uint8Array {\n  const arr = new Uint8Array(1);\n  arr[0] |= status.hardcore ? 1 << 2 : 0;\n  arr[0] |= status.died ? 1 << 3 : 0;\n  arr[0] |= status.expansion ? 1 << 5 : 0;\n  arr[0] |= status.ladder ? 1 << 6 : 0;\n  return arr;\n}\n\nfunction _readCharMenuAppearance(bytes: Uint8Array, constants: types.IConstantData): types.ICharMenuAppearance {\n  const appearance = {} as types.ICharMenuAppearance;\n  const reader = new BitReader(bytes);\n  const graphics = reader.ReadArray(16);\n  const tints = reader.ReadArray(16);\n  appearance.head = { graphic: graphics[0], tint: tints[0] } as types.IMenuAppearance;\n  appearance.torso = { graphic: graphics[1], tint: tints[1] } as types.IMenuAppearance;\n  appearance.legs = { graphic: graphics[2], tint: tints[2] } as types.IMenuAppearance;\n  appearance.right_arm = { graphic: graphics[3], tint: tints[3] } as types.IMenuAppearance;\n  appearance.left_arm = { graphic: graphics[4], tint: tints[4] } as types.IMenuAppearance;\n  appearance.right_hand = { graphic: graphics[5], tint: tints[5] } as types.IMenuAppearance;\n  appearance.left_hand = { graphic: graphics[6], tint: tints[6] } as types.IMenuAppearance;\n  appearance.shield = { graphic: graphics[7], tint: tints[7] } as types.IMenuAppearance;\n  appearance.special1 = { graphic: graphics[8], tint: tints[8] } as types.IMenuAppearance;\n  appearance.special2 = { graphic: graphics[9], tint: tints[9] } as types.IMenuAppearance;\n  appearance.special3 = { graphic: graphics[10], tint: tints[10] } as types.IMenuAppearance;\n  appearance.special4 = { graphic: graphics[11], tint: tints[11] } as types.IMenuAppearance;\n  appearance.special5 = { graphic: graphics[12], tint: tints[12] } as types.IMenuAppearance;\n  appearance.special6 = { graphic: graphics[13], tint: tints[13] } as types.IMenuAppearance;\n  appearance.special7 = { graphic: graphics[14], tint: tints[14] } as types.IMenuAppearance;\n  appearance.special8 = { graphic: graphics[15], tint: tints[15] } as types.IMenuAppearance;\n  return appearance;\n}\n\nfunction _writeCharMenuAppearance(appearance: types.ICharMenuAppearance, constants: types.IConstantData): Uint8Array {\n  const writer = new BitWriter(32);\n  writer.length = 32 * 8;\n\n  const graphics: number[] = [];\n  graphics.push(appearance && appearance.head ? appearance.head.graphic : 0);\n  graphics.push(appearance && appearance.torso ? appearance.torso.graphic : 0);\n  graphics.push(appearance && appearance.legs ? appearance.legs.graphic : 0);\n  graphics.push(appearance && appearance.right_arm ? appearance.right_arm.graphic : 0);\n  graphics.push(appearance && appearance.left_arm ? appearance.left_arm.graphic : 0);\n  graphics.push(appearance && appearance.right_hand ? appearance.right_hand.graphic : 0);\n  graphics.push(appearance && appearance.left_hand ? appearance.left_hand.graphic : 0);\n  graphics.push(appearance && appearance.shield ? appearance.shield.graphic : 0);\n  graphics.push(appearance && appearance.special1 ? appearance.special1.graphic : 0);\n  graphics.push(appearance && appearance.special2 ? appearance.special2.graphic : 0);\n  graphics.push(appearance && appearance.special3 ? appearance.special3.graphic : 0);\n  graphics.push(appearance && appearance.special4 ? appearance.special4.graphic : 0);\n  graphics.push(appearance && appearance.special5 ? appearance.special5.graphic : 0);\n  graphics.push(appearance && appearance.special6 ? appearance.special6.graphic : 0);\n  graphics.push(appearance && appearance.special7 ? appearance.special7.graphic : 0);\n  graphics.push(appearance && appearance.special8 ? appearance.special8.graphic : 0);\n\n  for (const g of graphics) {\n    writer.WriteUInt8(g);\n  }\n\n  const tints: number[] = [];\n  tints.push(appearance && appearance.head ? appearance.head.tint : 0);\n  tints.push(appearance && appearance.torso ? appearance.torso.tint : 0);\n  tints.push(appearance && appearance.legs ? appearance.legs.tint : 0);\n  tints.push(appearance && appearance.right_arm ? appearance.right_arm.tint : 0);\n  tints.push(appearance && appearance.left_arm ? appearance.left_arm.tint : 0);\n  tints.push(appearance && appearance.right_hand ? appearance.right_hand.tint : 0);\n  tints.push(appearance && appearance.left_hand ? appearance.left_hand.tint : 0);\n  tints.push(appearance && appearance.shield ? appearance.shield.tint : 0);\n  tints.push(appearance && appearance.special1 ? appearance.special1.tint : 0);\n  tints.push(appearance && appearance.special2 ? appearance.special2.tint : 0);\n  tints.push(appearance && appearance.special3 ? appearance.special3.tint : 0);\n  tints.push(appearance && appearance.special4 ? appearance.special4.tint : 0);\n  tints.push(appearance && appearance.special5 ? appearance.special5.tint : 0);\n  tints.push(appearance && appearance.special6 ? appearance.special6.tint : 0);\n  tints.push(appearance && appearance.special7 ? appearance.special7.tint : 0);\n  tints.push(appearance && appearance.special8 ? appearance.special8.tint : 0);\n\n  for (const t of tints) {\n    writer.WriteUInt8(t);\n  }\n  return writer.ToArray();\n}\n\nfunction _readAssignedSkills(bytes: Uint8Array, constants: types.IConstantData): string[] {\n  const skills = [] as string[];\n  const reader = new BitReader(bytes);\n  for (let i = 0; i < 16; i++) {\n    const skillId = reader.ReadUInt32();\n    const skill = constants.skills[skillId];\n    if (skill) {\n      skills.push(skill.s);\n    }\n  }\n  return skills;\n}\n\nfunction _writeAssignedSkills(skills: string[], constants: types.IConstantData): Uint8Array {\n  const writer = new BitWriter(64);\n  writer.length = 64 * 8;\n  skills = skills || [];\n  for (let i = 0; i < 16; i++) {\n    const skillId = _skillId(skills[i], constants);\n    if (skillId > 0) {\n      writer.WriteUInt32(skillId);\n    } else {\n      writer.WriteUInt32(0xffff);\n    }\n  }\n\n  return writer.ToArray();\n}\n\nfunction _readDifficulty(bytes: Uint8Array): types.IDifficulty {\n  const difficulty = {} as types.IDifficulty;\n  difficulty.Normal = bytes[0];\n  difficulty.Nightmare = bytes[1];\n  difficulty.Hell = bytes[2];\n  return difficulty;\n}\n\nfunction _writeDifficulty(difficulty: types.IDifficulty): Uint8Array {\n  const writer = new BitWriter(3);\n  writer.length = 3 * 8;\n  writer.WriteUInt8(difficulty.Normal);\n  writer.WriteUInt8(difficulty.Nightmare);\n  writer.WriteUInt8(difficulty.Hell);\n  return writer.ToArray();\n}\n\nfunction _readQuests(bytes: Uint8Array): types.IQuests {\n  const quests = {} as types.IQuests;\n  const reader = new BitReader(bytes);\n  quests.act_i = {} as types.IActIQuests;\n  quests.act_i.introduced = reader.ReadUInt16() === 0x1; //0x0000\n  quests.act_i.den_of_evil = _readQuest(reader.ReadArray(2)); //0x0002\n  quests.act_i.sisters_burial_grounds = _readQuest(reader.ReadArray(2));\n  quests.act_i.tools_of_the_trade = _readQuest(reader.ReadArray(2));\n  quests.act_i.the_search_for_cain = _readQuest(reader.ReadArray(2));\n  quests.act_i.the_forgotten_tower = _readQuest(reader.ReadArray(2));\n  quests.act_i.sisters_to_the_slaughter = _readQuest(reader.ReadArray(2));\n  quests.act_i.completed = reader.ReadUInt16() === 0x1;\n  quests.act_ii = {} as types.IActIIQuests;\n  quests.act_ii.introduced = reader.ReadUInt16() === 0x1; //0x0010 [if jerhyn introduction = 0x01]\n  quests.act_ii.radaments_lair = _readQuest(reader.ReadArray(2)); //0x0012\n  quests.act_ii.the_horadric_staff = _readQuest(reader.ReadArray(2));\n  quests.act_ii.tainted_sun = _readQuest(reader.ReadArray(2));\n  quests.act_ii.arcane_sanctuary = _readQuest(reader.ReadArray(2));\n  quests.act_ii.the_summoner = _readQuest(reader.ReadArray(2));\n  quests.act_ii.the_seven_tombs = _readQuest(reader.ReadArray(2));\n  quests.act_ii.completed = reader.ReadUInt16() === 0x1; //0x001e\n  quests.act_iii = {} as types.IActIIIQuests;\n  quests.act_iii.introduced = reader.ReadUInt16() === 0x1; //0x0020 [if hratli introduction = 0x01]\n  quests.act_iii.lam_esens_tome = _readQuest(reader.ReadArray(2)); //0x0022\n  quests.act_iii.khalims_will = _readQuest(reader.ReadArray(2));\n  quests.act_iii.blade_of_the_old_religion = _readQuest(reader.ReadArray(2));\n  quests.act_iii.the_golden_bird = _readQuest(reader.ReadArray(2));\n  quests.act_iii.the_blackened_temple = _readQuest(reader.ReadArray(2));\n  quests.act_iii.the_guardian = _readQuest(reader.ReadArray(2));\n  quests.act_iii.completed = reader.ReadUInt16() === 0x1; //0x002e\n  quests.act_iv = {} as types.IActIVQuests;\n  quests.act_iv.introduced = reader.ReadUInt16() === 0x1; //0x0030 [if activ introduction = 0x01]\n  quests.act_iv.the_fallen_angel = _readQuest(reader.ReadArray(2)); //0x0032\n  quests.act_iv.terrors_end = _readQuest(reader.ReadArray(2));\n  quests.act_iv.hellforge = _readQuest(reader.ReadArray(2));\n  quests.act_iv.completed = reader.ReadUInt16() === 0x1; //0x0038\n  reader.SkipBytes(10); //0x003a\n  quests.act_v = {} as types.IActVQuests;\n  quests.act_v.introduced = reader.ReadUInt16() === 0x1;\n  quests.act_v.siege_on_harrogath = _readQuest(reader.ReadArray(2)); //0x0046\n  quests.act_v.rescue_on_mount_arreat = _readQuest(reader.ReadArray(2));\n  quests.act_v.prison_of_ice = _readQuest(reader.ReadArray(2));\n  quests.act_v.betrayal_of_harrogath = _readQuest(reader.ReadArray(2));\n  quests.act_v.rite_of_passage = _readQuest(reader.ReadArray(2));\n  quests.act_v.eve_of_destruction = _readQuest(reader.ReadArray(2));\n  quests.act_v.completed = reader.ReadUInt16() === 0x1;\n  reader.SkipBytes(12);\n  return quests; //sizeof [0x0060]\n}\n\nfunction _writeQuests(quests: types.IQuests): Uint8Array {\n  const writer = new BitWriter(96);\n  writer.length = 96 * 8;\n  const difficultyCompleted = +quests.act_v.completed || +quests.act_v.eve_of_destruction.is_completed;\n  return writer\n    .WriteUInt16(+quests.act_i.introduced)\n    .WriteArray(_writeQuest(quests.act_i.den_of_evil))\n    .WriteArray(_writeQuest(quests.act_i.sisters_burial_grounds))\n    .WriteArray(_writeQuest(quests.act_i.tools_of_the_trade))\n    .WriteArray(_writeQuest(quests.act_i.the_search_for_cain))\n    .WriteArray(_writeQuest(quests.act_i.the_forgotten_tower))\n    .WriteArray(_writeQuest(quests.act_i.sisters_to_the_slaughter))\n    .WriteUInt16(+quests.act_i.completed || +quests.act_i.sisters_to_the_slaughter.is_completed)\n    .WriteUInt16(+quests.act_ii.introduced || +quests.act_i.sisters_to_the_slaughter.is_completed)\n    .WriteArray(_writeQuest(quests.act_ii.radaments_lair))\n    .WriteArray(_writeQuest(quests.act_ii.the_horadric_staff))\n    .WriteArray(_writeQuest(quests.act_ii.tainted_sun))\n    .WriteArray(_writeQuest(quests.act_ii.arcane_sanctuary))\n    .WriteArray(_writeQuest(quests.act_ii.the_summoner))\n    .WriteArray(_writeQuest(quests.act_ii.the_seven_tombs))\n    .WriteUInt16(+quests.act_ii.completed || +quests.act_ii.the_seven_tombs.is_completed)\n    .WriteUInt16(+quests.act_iii.introduced || +quests.act_ii.the_seven_tombs.is_completed)\n    .WriteArray(_writeQuest(quests.act_iii.lam_esens_tome))\n    .WriteArray(_writeQuest(quests.act_iii.khalims_will))\n    .WriteArray(_writeQuest(quests.act_iii.blade_of_the_old_religion))\n    .WriteArray(_writeQuest(quests.act_iii.the_golden_bird))\n    .WriteArray(_writeQuest(quests.act_iii.the_blackened_temple))\n    .WriteArray(_writeQuest(quests.act_iii.the_guardian))\n    .WriteUInt16(+quests.act_iii.completed || +quests.act_iii.the_guardian.is_completed)\n    .WriteUInt16(+quests.act_iv.introduced || +quests.act_iii.the_guardian.is_completed)\n    .WriteArray(_writeQuest(quests.act_iv.the_fallen_angel))\n    .WriteArray(_writeQuest(quests.act_iv.terrors_end))\n    .WriteArray(_writeQuest(quests.act_iv.hellforge))\n    .WriteUInt16(+quests.act_iv.completed || +quests.act_iv.terrors_end.is_completed)\n    .WriteArray(new Uint8Array(6))\n    .WriteUInt16(+quests.act_v.introduced || +quests.act_iv.terrors_end.is_completed)\n    .WriteArray(new Uint8Array(4))\n    .WriteArray(_writeQuest(quests.act_v.siege_on_harrogath))\n    .WriteArray(_writeQuest(quests.act_v.rescue_on_mount_arreat))\n    .WriteArray(_writeQuest(quests.act_v.prison_of_ice))\n    .WriteArray(_writeQuest(quests.act_v.betrayal_of_harrogath))\n    .WriteArray(_writeQuest(quests.act_v.rite_of_passage))\n    .WriteArray(_writeQuest(quests.act_v.eve_of_destruction))\n    .WriteUInt8(difficultyCompleted)\n    .WriteUInt8(difficultyCompleted ? 0x80 : 0x0) //is this right?\n    .WriteArray(new Uint8Array(12))\n    .ToArray();\n}\n\nfunction _readQuest(bytes: Uint8Array): types.IQuest {\n  const quest = {} as types.IQuest;\n  const reader = new BitReader(bytes);\n  quest.is_completed = reader.ReadBit() === 1;\n  quest.is_requirement_completed = reader.ReadBit() === 1;\n  quest.is_received = reader.ReadBit() === 1;\n  if (reader.ReadBit() === 1) quest.unk3 = true;\n  if (reader.ReadBit() === 1) quest.unk4 = true;\n  if (reader.ReadBit() === 1) quest.unk5 = true;\n  if (reader.ReadBit() === 1) quest.unk6 = true;\n  if (reader.ReadBit() === 1) quest.consumed_scroll = true;\n  if (reader.ReadBit() === 1) quest.unk8 = true;\n  if (reader.ReadBit() === 1) quest.unk9 = true;\n  if (reader.ReadBit() === 1) quest.unk10 = true;\n  if (reader.ReadBit() === 1) quest.unk11 = true;\n  quest.closed = reader.ReadBit() === 1;\n  quest.done_recently = reader.ReadBit() === 1;\n  if (reader.ReadBit() === 1) quest.unk14 = true;\n  if (reader.ReadBit() === 1) quest.unk15 = true;\n  return quest;\n}\n\nfunction _writeQuest(quest: types.IQuest): Uint8Array {\n  const writer = new BitWriter(2);\n  writer.length = 2 * 8;\n  writer.WriteBit(+quest.is_completed);\n  writer.WriteBit(+quest.is_requirement_completed);\n  writer.WriteBit(+quest.is_received);\n  writer.WriteBit(+quest.unk3);\n  writer.WriteBit(+quest.unk4);\n  writer.WriteBit(+quest.unk5);\n  writer.WriteBit(+quest.unk6);\n  writer.WriteBit(+quest.consumed_scroll);\n  writer.WriteBit(+quest.unk8);\n  writer.WriteBit(+quest.unk9);\n  writer.WriteBit(+quest.unk10);\n  writer.WriteBit(+quest.unk11);\n  writer.WriteBit(+quest.closed);\n  writer.WriteBit(+quest.done_recently);\n  writer.WriteBit(+quest.unk14);\n  writer.WriteBit(+quest.unk15);\n  return writer.ToArray();\n}\n\nfunction _readWaypointData(bytes: Uint8Array): types.IWaypointData {\n  const waypoints = {} as types.IWaypointData;\n  const reader = new BitReader(bytes);\n  for (let i = 0; i < difficulties.length; i++) {\n    waypoints[difficulties[i]] = _readWaypoints(reader.ReadArray(24));\n  }\n  return waypoints;\n}\n\nfunction _readWaypoints(bytes: Uint8Array): types.IWaypoints {\n  const waypoints = {} as types.IWaypoints;\n  const reader = new BitReader(bytes);\n  reader.SkipBytes(2); //unk = 0x2, 0x\n  waypoints.act_i = {} as types.IActIWaypoints;\n  waypoints.act_i.rogue_encampement = reader.ReadBit() === 1;\n  waypoints.act_i.cold_plains = reader.ReadBit() === 1;\n  waypoints.act_i.stony_field = reader.ReadBit() === 1;\n  waypoints.act_i.dark_woods = reader.ReadBit() === 1;\n  waypoints.act_i.black_marsh = reader.ReadBit() === 1;\n  waypoints.act_i.outer_cloister = reader.ReadBit() === 1;\n  waypoints.act_i.jail_lvl_1 = reader.ReadBit() === 1;\n  waypoints.act_i.inner_cloister = reader.ReadBit() === 1;\n  waypoints.act_i.catacombs_lvl_2 = reader.ReadBit() === 1;\n  waypoints.act_ii = {} as types.IActIIWaypoints;\n  waypoints.act_ii.lut_gholein = reader.ReadBit() === 1;\n  waypoints.act_ii.sewers_lvl_2 = reader.ReadBit() === 1;\n  waypoints.act_ii.dry_hills = reader.ReadBit() === 1;\n  waypoints.act_ii.halls_of_the_dead_lvl_2 = reader.ReadBit() === 1;\n  waypoints.act_ii.far_oasis = reader.ReadBit() === 1;\n  waypoints.act_ii.lost_city = reader.ReadBit() === 1;\n  waypoints.act_ii.palace_cellar_lvl_1 = reader.ReadBit() === 1;\n  waypoints.act_ii.arcane_sanctuary = reader.ReadBit() === 1;\n  waypoints.act_ii.canyon_of_the_magi = reader.ReadBit() === 1;\n  waypoints.act_iii = {} as types.IActIIIWaypoints;\n  waypoints.act_iii.kurast_docks = reader.ReadBit() === 1;\n  waypoints.act_iii.spider_forest = reader.ReadBit() === 1;\n  waypoints.act_iii.great_marsh = reader.ReadBit() === 1;\n  waypoints.act_iii.flayer_jungle = reader.ReadBit() === 1;\n  waypoints.act_iii.lower_kurast = reader.ReadBit() === 1;\n  waypoints.act_iii.kurast_bazaar = reader.ReadBit() === 1;\n  waypoints.act_iii.upper_kurast = reader.ReadBit() === 1;\n  waypoints.act_iii.travincal = reader.ReadBit() === 1;\n  waypoints.act_iii.durance_of_hate_lvl_2 = reader.ReadBit() === 1;\n  waypoints.act_iv = {} as types.IActIVWaypoints;\n  waypoints.act_iv.the_pandemonium_fortress = reader.ReadBit() === 1;\n  waypoints.act_iv.city_of_the_damned = reader.ReadBit() === 1;\n  waypoints.act_iv.river_of_flame = reader.ReadBit() === 1;\n  waypoints.act_v = {} as types.IActVWaypoints;\n  waypoints.act_v.harrogath = reader.ReadBit() === 1;\n  waypoints.act_v.frigid_highlands = reader.ReadBit() === 1;\n  waypoints.act_v.arreat_plateau = reader.ReadBit() === 1;\n  waypoints.act_v.crystalline_passage = reader.ReadBit() === 1;\n  waypoints.act_v.halls_of_pain = reader.ReadBit() === 1;\n  waypoints.act_v.glacial_trail = reader.ReadBit() === 1;\n  waypoints.act_v.frozen_tundra = reader.ReadBit() === 1;\n  waypoints.act_v.the_ancients_way = reader.ReadBit() === 1;\n  waypoints.act_v.worldstone_keep_lvl_2 = reader.ReadBit() === 1;\n  reader.Align().SkipBytes(17);\n  return waypoints;\n}\n\nfunction _writeWaypointData(waypoints: types.IWaypointData): Uint8Array {\n  const writer = new BitWriter(72);\n  writer.length = 72 * 8;\n  for (let i = 0; i < difficulties.length; i++) {\n    const w = waypoints != null ? waypoints[difficulties[i]] : null;\n    writer.WriteArray(_writeWaypoints(w));\n  }\n  return writer.ToArray();\n}\n\nfunction _writeWaypoints(waypoints: types.IWaypoints): Uint8Array {\n  const writer = new BitWriter(24);\n  writer.length = 24 * 8;\n  writer.WriteArray(new Uint8Array([0x02, 0x01]));\n  if (waypoints) {\n    if (waypoints.act_i) {\n      writer.WriteBit(+waypoints.act_i.rogue_encampement);\n      writer.WriteBit(+waypoints.act_i.cold_plains);\n      writer.WriteBit(+waypoints.act_i.stony_field);\n      writer.WriteBit(+waypoints.act_i.dark_woods);\n      writer.WriteBit(+waypoints.act_i.black_marsh);\n      writer.WriteBit(+waypoints.act_i.outer_cloister);\n      writer.WriteBit(+waypoints.act_i.jail_lvl_1);\n      writer.WriteBit(+waypoints.act_i.inner_cloister);\n      writer.WriteBit(+waypoints.act_i.catacombs_lvl_2);\n    }\n    if (waypoints.act_ii) {\n      writer.WriteBit(+waypoints.act_ii.lut_gholein);\n      writer.WriteBit(+waypoints.act_ii.sewers_lvl_2);\n      writer.WriteBit(+waypoints.act_ii.dry_hills);\n      writer.WriteBit(+waypoints.act_ii.halls_of_the_dead_lvl_2);\n      writer.WriteBit(+waypoints.act_ii.far_oasis);\n      writer.WriteBit(+waypoints.act_ii.lost_city);\n      writer.WriteBit(+waypoints.act_ii.palace_cellar_lvl_1);\n      writer.WriteBit(+waypoints.act_ii.arcane_sanctuary);\n      writer.WriteBit(+waypoints.act_ii.canyon_of_the_magi);\n    }\n    if (waypoints.act_iii) {\n      writer.WriteBit(+waypoints.act_iii.kurast_docks);\n      writer.WriteBit(+waypoints.act_iii.spider_forest);\n      writer.WriteBit(+waypoints.act_iii.great_marsh);\n      writer.WriteBit(+waypoints.act_iii.flayer_jungle);\n      writer.WriteBit(+waypoints.act_iii.lower_kurast);\n      writer.WriteBit(+waypoints.act_iii.kurast_bazaar);\n      writer.WriteBit(+waypoints.act_iii.upper_kurast);\n      writer.WriteBit(+waypoints.act_iii.travincal);\n      writer.WriteBit(+waypoints.act_iii.durance_of_hate_lvl_2);\n    }\n    if (waypoints.act_iv) {\n      writer.WriteBit(+waypoints.act_iv.the_pandemonium_fortress);\n      writer.WriteBit(+waypoints.act_iv.city_of_the_damned);\n      writer.WriteBit(+waypoints.act_iv.river_of_flame);\n    }\n    if (waypoints.act_v) {\n      writer.WriteBit(+waypoints.act_v.harrogath);\n      writer.WriteBit(+waypoints.act_v.frigid_highlands);\n      writer.WriteBit(+waypoints.act_v.arreat_plateau);\n      writer.WriteBit(+waypoints.act_v.crystalline_passage);\n      writer.WriteBit(+waypoints.act_v.halls_of_pain);\n      writer.WriteBit(+waypoints.act_v.glacial_trail);\n      writer.WriteBit(+waypoints.act_v.frozen_tundra);\n      writer.WriteBit(+waypoints.act_v.the_ancients_way);\n      writer.WriteBit(+waypoints.act_v.worldstone_keep_lvl_2);\n    }\n  } else {\n    //all wps\n    //writer.WriteArray(new Uint8Array(5));\n    writer.WriteArray(new Uint8Array([0xff, 0xff, 0xff, 0xff, 0x7f]));\n    //_writeBits(writer, 0x3fffffffff, start, 0, 38);\n  }\n  writer.Align().WriteArray(new Uint8Array(17));\n  return writer.ToArray();\n}\n\nfunction _readNPCData(bytes: Uint8Array): types.INPCData {\n  const npcs = { normal: {}, nm: {}, hell: {} } as types.INPCData;\n  const reader = new BitReader(bytes);\n  for (let j = 0; j < 3; j++) {\n    npcs[difficulties[j]] = {\n      warriv_act_ii: { intro: false, congrats: false },\n      charsi: { intro: false, congrats: false },\n      warriv_act_i: { intro: false, congrats: false },\n      kashya: { intro: false, congrats: false },\n      akara: { intro: false, congrats: false },\n      gheed: { intro: false, congrats: false },\n      greiz: { intro: false, congrats: false },\n      jerhyn: { intro: false, congrats: false },\n      meshif_act_ii: { intro: false, congrats: false },\n      geglash: { intro: false, congrats: false },\n      lysnader: { intro: false, congrats: false },\n      fara: { intro: false, congrats: false },\n      drogan: { intro: false, congrats: false },\n      alkor: { intro: false, congrats: false },\n      hratli: { intro: false, congrats: false },\n      ashera: { intro: false, congrats: false },\n      cain_act_iii: { intro: false, congrats: false },\n      elzix: { intro: false, congrats: false },\n      malah: { intro: false, congrats: false },\n      anya: { intro: false, congrats: false },\n      natalya: { intro: false, congrats: false },\n      meshif_act_iii: { intro: false, congrats: false },\n      ormus: { intro: false, congrats: false },\n      cain_act_v: { intro: false, congrats: false },\n      qualkehk: { intro: false, congrats: false },\n      nihlathak: { intro: false, congrats: false },\n    } as types.INPCS;\n  }\n  //introductions\n  for (let i = 0; i < 3; i++) {\n    const j = i * 5;\n    const npc = npcs[difficulties[i]];\n    npc.warriv_act_ii.intro = reader.bits[0 + j * 8] === 1;\n    npc.charsi.intro = reader.bits[2 + j * 8] === 1;\n    npc.warriv_act_i.intro = reader.bits[3 + j * 8] === 1;\n    npc.kashya.intro = reader.bits[4 + j * 8] === 1;\n    npc.akara.intro = reader.bits[5 + j * 8] === 1;\n    npc.gheed.intro = reader.bits[6 + j * 8] === 1;\n    npc.greiz.intro = reader.bits[8 + j * 8] === 1;\n    npc.jerhyn.intro = reader.bits[9 + j * 8] === 1;\n    npc.meshif_act_ii.intro = reader.bits[10 + j * 8] === 1;\n    npc.geglash.intro = reader.bits[11 + j * 8] === 1;\n    npc.lysnader.intro = reader.bits[12 + j * 8] === 1;\n    npc.fara.intro = reader.bits[13 + j * 8] === 1;\n    npc.drogan.intro = reader.bits[14 + j * 8] === 1;\n    npc.alkor.intro = reader.bits[16 + j * 8] === 1;\n    npc.hratli.intro = reader.bits[17 + j * 8] === 1;\n    npc.ashera.intro = reader.bits[18 + j * 8] === 1;\n    npc.cain_act_iii.intro = reader.bits[21 + j * 8] === 1;\n    npc.elzix.intro = reader.bits[23 + j * 8] === 1;\n    npc.malah.intro = reader.bits[24 + j * 8] === 1;\n    npc.anya.intro = reader.bits[25 + j * 8] === 1;\n    npc.natalya.intro = reader.bits[27 + j * 8] === 1;\n    npc.meshif_act_iii.intro = reader.bits[28 + j * 8] === 1;\n    npc.ormus.intro = reader.bits[31 + j * 8] === 1;\n    npc.cain_act_v.intro = reader.bits[37 + j * 8] === 1;\n    npc.qualkehk.intro = reader.bits[38 + j * 8] === 1;\n    npc.nihlathak.intro = reader.bits[39 + j * 8] === 1;\n  }\n  //congrats\n  for (let i = 0; i < 3; i++) {\n    const j = i * 5;\n    const npc = npcs[difficulties[i]];\n    npc.warriv_act_ii.congrats = reader.bits[192 + (0 + j * 8)] === 1;\n    npc.charsi.congrats = reader.bits[192 + (2 + j * 8)] === 1;\n    npc.warriv_act_i.congrats = reader.bits[192 + (3 + j * 8)] === 1;\n    npc.kashya.congrats = reader.bits[192 + (4 + j * 8)] === 1;\n    npc.akara.congrats = reader.bits[192 + (5 + j * 8)] === 1;\n    npc.gheed.congrats = reader.bits[192 + (6 + j * 8)] === 1;\n    npc.greiz.congrats = reader.bits[192 + (8 + j * 8)] === 1;\n    npc.jerhyn.congrats = reader.bits[192 + (9 + j * 8)] === 1;\n    npc.meshif_act_ii.congrats = reader.bits[192 + (10 + j * 8)] === 1;\n    npc.geglash.congrats = reader.bits[192 + (11 + j * 8)] === 1;\n    npc.lysnader.congrats = reader.bits[192 + (12 + j * 8)] === 1;\n    npc.fara.congrats = reader.bits[192 + (13 + j * 8)] === 1;\n    npc.drogan.congrats = reader.bits[192 + (14 + j * 8)] === 1;\n    npc.alkor.congrats = reader.bits[192 + (16 + j * 8)] === 1;\n    npc.hratli.congrats = reader.bits[192 + (17 + j * 8)] === 1;\n    npc.ashera.congrats = reader.bits[192 + (18 + j * 8)] === 1;\n    npc.cain_act_iii.congrats = reader.bits[192 + (21 + j * 8)] === 1;\n    npc.elzix.congrats = reader.bits[192 + (23 + j * 8)] === 1;\n    npc.malah.congrats = reader.bits[192 + (24 + j * 8)] === 1;\n    npc.anya.congrats = reader.bits[192 + (25 + j * 8)] === 1;\n    npc.natalya.congrats = reader.bits[192 + (27 + j * 8)] === 1;\n    npc.meshif_act_iii.congrats = reader.bits[192 + (28 + j * 8)] === 1;\n    npc.ormus.congrats = reader.bits[192 + (31 + j * 8)] === 1;\n    npc.cain_act_v.congrats = reader.bits[192 + (37 + j * 8)] === 1;\n    npc.qualkehk.congrats = reader.bits[192 + (38 + j * 8)] === 1;\n    npc.nihlathak.congrats = reader.bits[192 + (39 + j * 8)] === 1;\n  }\n  return npcs;\n}\n\nfunction _writeNPCData(npcs: types.INPCData): Uint8Array {\n  const writer = new BitWriter(0x30);\n  writer.length = 0x30 * 8;\n  if (npcs) {\n    for (let j = 0; j < 3; j++) {\n      const npc = npcs[difficulties[j]];\n      writer.SeekByte(j * 5);\n      writer.WriteBit(+npc.warriv_act_ii.intro);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.charsi.intro);\n      writer.WriteBit(+npc.warriv_act_i.intro);\n      writer.WriteBit(+npc.kashya.intro);\n      writer.WriteBit(+npc.akara.intro);\n      writer.WriteBit(+npc.gheed.intro);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.greiz.intro);\n      writer.WriteBit(+npc.jerhyn.intro);\n      writer.WriteBit(+npc.meshif_act_ii.intro);\n      writer.WriteBit(+npc.geglash.intro);\n      writer.WriteBit(+npc.lysnader.intro);\n      writer.WriteBit(+npc.fara.intro);\n      writer.WriteBit(+npc.drogan.intro);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.alkor.intro);\n      writer.WriteBit(+npc.hratli.intro);\n      writer.WriteBit(+npc.ashera.intro);\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\n      writer.WriteBit(+npc.cain_act_iii.intro);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.elzix.intro);\n      writer.WriteBit(+npc.malah.intro);\n      writer.WriteBit(+npc.anya.intro);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.natalya.intro);\n      writer.WriteBit(+npc.meshif_act_iii.intro);\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\n      writer.WriteBit(+npc.ormus.intro);\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\n      writer.WriteBit(+npc.cain_act_v.intro);\n      writer.WriteBit(+npc.qualkehk.intro);\n      writer.WriteBit(+npc.nihlathak.intro);\n    }\n    for (let j = 0; j < 3; j++) {\n      writer.SeekByte(24 + j * 5);\n      const npc = npcs[difficulties[j]];\n      writer.WriteBit(+npc.warriv_act_ii.congrats);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.charsi.congrats);\n      writer.WriteBit(+npc.warriv_act_i.congrats);\n      writer.WriteBit(+npc.kashya.congrats);\n      writer.WriteBit(+npc.akara.congrats);\n      writer.WriteBit(+npc.gheed.congrats);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.greiz.congrats);\n      writer.WriteBit(+npc.jerhyn.congrats);\n      writer.WriteBit(+npc.meshif_act_ii.congrats);\n      writer.WriteBit(+npc.geglash.congrats);\n      writer.WriteBit(+npc.lysnader.congrats);\n      writer.WriteBit(+npc.fara.congrats);\n      writer.WriteBit(+npc.drogan.congrats);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.alkor.congrats);\n      writer.WriteBit(+npc.hratli.congrats);\n      writer.WriteBit(+npc.ashera.congrats);\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\n      writer.WriteBit(+npc.cain_act_iii.congrats);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.elzix.congrats);\n      writer.WriteBit(+npc.malah.congrats);\n      writer.WriteBit(+npc.anya.congrats);\n      writer.WriteBit(0);\n      writer.WriteBit(+npc.natalya.congrats);\n      writer.WriteBit(+npc.meshif_act_iii.congrats);\n      writer.WriteBits(new Uint8Array(2).fill(0), 2);\n      writer.WriteBit(+npc.ormus.congrats);\n      writer.WriteBits(new Uint8Array(5).fill(0), 5);\n      writer.WriteBit(+npc.cain_act_v.congrats);\n      writer.WriteBit(+npc.qualkehk.congrats);\n      writer.WriteBit(+npc.nihlathak.congrats);\n    }\n  }\n  return writer.ToArray();\n}\n","import * as types from \"../d2/types\";\n\n//special stats. read the next N properties.\n//seems to be hardcode in d2 and not in itemstatcost\nconst item_property_stat_count = {\n  item_maxdamage_percent: { numprops: 2, rangestr: \"strModMinDamageRange\", equalstr: \"strModEnhancedDamage\" },\n  firemindam: { numprops: 2, rangestr: \"strModFireDamageRange\", equalstr: \"strModFireDamage\" },\n  lightmindam: { numprops: 2, rangestr: \"strModLightningDamageRange\", equalstr: \"strModLightningDamage\" },\n  magicmindam: { numprops: 2, rangestr: \"strModMagicDamageRange\", equalstr: \"strModMagicDamage\" },\n  coldmindam: { numprops: 3, rangestr: \"strModColdDamageRange\", equalstr: \"strModColdDamage\" },\n  poisonmindam: { numprops: 3, rangestr: \"strModPoisonDamageRange\", equalstr: \"strModPoisonDamage\" },\n};\n\n//TODO use smaller field names to minimize size of file.\nfunction readConstantData(buffers: any): types.IConstantData {\n  const constants = {} as types.IConstantData;\n\n  let strings = _readStrings(_getKey(buffers, \"string.txt\"));\n  strings = Object.assign(strings, _readStrings(_getKey(buffers, \"expansionstring.txt\")));\n  strings = Object.assign(strings, _readStrings(_getKey(buffers, \"patchstring.txt\")));\n\n  constants.classes = _readClasses(_getArray(buffers, \"CharStats.txt\"), _getArray(buffers, \"PlayerClass.txt\"), strings);\n  const skillDescs = _readSkillDesc(_getArray(buffers, \"SkillDesc.txt\"), strings);\n  constants.skills = _readSkills(_getArray(buffers, \"skills.txt\"), skillDescs, strings);\n  constants.rare_names = [null].concat(_readRareNames(_getArray(buffers, \"RareSuffix.txt\"), 1, strings));\n  constants.rare_names = constants.rare_names.concat(\n    _readRareNames(_getArray(buffers, \"RarePrefix.txt\"), constants.rare_names.length, strings)\n  );\n  constants.magic_prefixes = _readMagicNames(_getArray(buffers, \"MagicPrefix.txt\"), strings);\n  constants.magic_suffixes = _readMagicNames(_getArray(buffers, \"MagicSuffix.txt\"), strings);\n  constants.properties = _readProperties(_getArray(buffers, \"Properties.txt\"), strings);\n  constants.magical_properties = _readItemStatCosts(_getArray(buffers, \"ItemStatCost.txt\"), strings);\n  constants.runewords = _readRunewords(_getArray(buffers, \"Runes.txt\"), strings);\n  constants.set_items = _readSetOrUnqItems(_getArray(buffers, \"SetItems.txt\"), strings);\n  constants.unq_items = _readSetOrUnqItems(_getArray(buffers, \"UniqueItems.txt\"), strings);\n  const item_types = _readTypes(_getArray(buffers, \"ItemTypes.txt\"), strings);\n  const armor_items = _readItems(_getArray(buffers, \"Armor.txt\"), item_types, strings);\n  const weapon_items = _readItems(_getArray(buffers, \"Weapons.txt\"), item_types, strings);\n  const other_items = _readItems(_getArray(buffers, \"Misc.txt\"), item_types, strings);\n\n  constants.stackables = {};\n  [...armor_items, ...weapon_items, ...other_items]\n    .filter((item) => item.s === 1)\n    .map((item) => (constants.stackables[item.code] = { n: item.n }));\n  constants.armor_items = {};\n  armor_items.map((item) => {\n    constants.armor_items[item.code] = item;\n    delete item.code;\n  });\n  constants.weapon_items = {};\n  weapon_items.map((item) => {\n    constants.weapon_items[item.code] = item;\n    delete item.code;\n  });\n  constants.other_items = {};\n  other_items.map((item) => {\n    constants.other_items[item.code] = item;\n    delete item.code;\n  });\n  _readGems(constants.other_items, _getArray(buffers, \"Gems.txt\"), strings);\n\n  return constants;\n}\n\nfunction _getArray(files: { [id: string]: Buffer }, find: string): any {\n  return _readTsv(_getKey(files, find));\n}\n\nfunction _getKey(files: { [id: string]: Buffer }, find: string): any {\n  const key = Object.keys(files).find((key) => key.toLowerCase() === find.toLowerCase());\n  if (!key) {\n    throw new Error(`Cannot find file: ${find}`);\n  }\n  return files[key];\n}\n\nfunction _readTsv(file: string): any {\n  const lines = file.split(/\\r?\\n/).map((line) => line.split(/\\t/));\n  const header = lines[0];\n  return {\n    header: header,\n    lines: lines,\n  };\n}\n\nfunction _readStrings(file: string): any {\n  const result = {} as any;\n  file\n    .split(/\\r?\\n/)\n    .map((line) => line.split(/\\t/))\n    .map((line) => {\n      if (!result[line[0]]) {\n        result[line[0]] = line[1];\n      }\n    });\n  return result;\n}\n\nfunction _readClasses(tsv: any, tsv2: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cClass = tsv.header.indexOf(\"class\");\n  const cLifePerLvl = tsv.header.indexOf(\"LifePerLevel\");\n  const cStamPerLvl = tsv.header.indexOf(\"StaminaPerLevel\");\n  const cManaPerLvl = tsv.header.indexOf(\"ManaPerLevel\");\n  const cLifePerVit = tsv.header.indexOf(\"LifePerVitality\");\n  const cStamPerVit = tsv.header.indexOf(\"StaminaPerVitality\");\n  const cManaPerMag = tsv.header.indexOf(\"ManaPerMagic\");\n  const cAllSkills = tsv.header.indexOf(\"StrAllSkills\");\n  const cSkillTab1 = tsv.header.indexOf(\"StrSkillTab1\");\n  const cSkillTab2 = tsv.header.indexOf(\"StrSkillTab2\");\n  const cSkillTab3 = tsv.header.indexOf(\"StrSkillTab3\");\n  const cClassOnly = tsv.header.indexOf(\"StrClassOnly\");\n  const cCode = tsv2.header.indexOf(\"Code\");\n  let id = 0;\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const clazz = tsv.lines[i][cClass];\n    if (clazz && clazz != \"Expansion\") {\n      arr[id] = {\n        n: clazz,\n        c: tsv2.lines[i][cCode],\n        as: strings[tsv.lines[i][cAllSkills]],\n        ts: [strings[tsv.lines[i][cSkillTab1]], strings[tsv.lines[i][cSkillTab2]], strings[tsv.lines[i][cSkillTab3]]],\n        co: strings[tsv.lines[i][cClassOnly]],\n        s: {\n          lpl: +tsv.lines[i][cLifePerLvl],\n          mpl: +tsv.lines[i][cManaPerLvl],\n          spl: +tsv.lines[i][cStamPerLvl],\n          lpv: +tsv.lines[i][cLifePerVit],\n          spv: +tsv.lines[i][cStamPerVit],\n          mpe: +tsv.lines[i][cManaPerMag],\n        },\n      };\n      id++;\n    }\n  }\n  return arr;\n}\n\nfunction _readSkillDesc(tsv: any, strings: any): any {\n  const arr = {} as any;\n  const cSkillDesc = tsv.header.indexOf(\"skilldesc\");\n  const cStrName = tsv.header.indexOf(\"str name\");\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const id = tsv.lines[i][cSkillDesc];\n    const skillStrName = tsv.lines[i][cStrName];\n    if (id && skillStrName) {\n      arr[id] = strings[skillStrName];\n    }\n  }\n  return arr;\n}\n\nfunction _readSkills(tsv: any, skillDescs: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cSkillDesc = tsv.header.indexOf(\"skilldesc\");\n  const cId = tsv.header.indexOf(\"Id\");\n  const cCharclass = tsv.header.indexOf(\"charclass\");\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const id = +tsv.lines[i][cId];\n    const skillDesc = tsv.lines[i][cSkillDesc];\n    if (skillDesc) {\n      const o = {} as any;\n      if (skillDescs[skillDesc]) o.s = skillDescs[skillDesc];\n      if (tsv.lines[i][cCharclass]) o.c = tsv.lines[i][cCharclass];\n      arr[id] = o;\n    }\n  }\n  return arr;\n}\n\nfunction _readRareNames(tsv: any, idx: number, strings: any): any[] {\n  const arr = [] as any[];\n  const cName = tsv.header.indexOf(\"name\");\n  let id = idx;\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const name = tsv.lines[i][cName];\n    if (name) {\n      arr[id - idx] = {\n        n: strings[name],\n      };\n      id++;\n    }\n  }\n  return arr;\n}\n\nfunction _readMagicNames(tsv: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cName = tsv.header.indexOf(\"Name\");\n  const cTransformcolor = tsv.header.indexOf(\"transformcolor\");\n  let id = 1;\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const name = tsv.lines[i][cName];\n    if (name != \"Expansion\") {\n      const o = {} as any;\n      o.n = strings[name];\n      if (tsv.lines[i][cTransformcolor]) o.tc = tsv.lines[i][cTransformcolor];\n      arr[id] = o;\n      id++;\n    }\n  }\n  return arr;\n}\n\nfunction _readProperties(tsv: any, strings: any): any {\n  const arr = {} as any;\n  const cCode = tsv.header.indexOf(\"code\");\n  const cStats = [];\n  for (let j = 1; j <= 7; j++) {\n    cStats[j] = {} as any;\n    cStats[j].cStat = tsv.header.indexOf(`stat${j}`);\n    cStats[j].cFunc = tsv.header.indexOf(`func${j}`);\n  }\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const code = tsv.lines[i][cCode];\n    if (code != \"Expansion\") {\n      const prop = [];\n      //prop.code = code;\n      for (let j = 1; j <= 7; j++) {\n        const stat = tsv.lines[i][cStats[j].cStat];\n        const func = tsv.lines[i][cStats[j].cFunc];\n        if (!stat && !func) {\n          break;\n        }\n        const s = {} as any;\n        if (stat) s.s = stat;\n        if (func) s.f = +func;\n        prop[j - 1] = s;\n      }\n      if (prop.length) {\n        arr[code] = prop;\n      }\n    }\n  }\n  return arr;\n}\n\nfunction _readRunewords(tsv: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cName = tsv.header.indexOf(\"Name\");\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const name = tsv.lines[i][cName];\n    if (name) {\n      let id = +name.substring(8);\n      //TODO: why?\n      if (id > 75) {\n        id += 25;\n      } else {\n        id += 26;\n      }\n      arr[id] = {\n        n: strings[tsv.lines[i][cName]],\n      };\n    }\n  }\n  return arr;\n}\n\nfunction _readTypes(tsv: any, strings: any): any {\n  const arr = {} as any;\n  const cCode = tsv.header.indexOf(\"Code\");\n  const cItemType = tsv.header.indexOf(\"ItemType\");\n  const cEquiv1 = tsv.header.indexOf(\"Equiv1\");\n  const cEquiv2 = tsv.header.indexOf(\"Equiv2\");\n  const cInvGfx = [];\n  for (let i = 1; i <= 6; i++) {\n    cInvGfx.push(tsv.header.indexOf(`InvGfx${i}`));\n  }\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const code = tsv.lines[i][cCode];\n    if (code) {\n      const o = {} as any;\n      const invgfx = [];\n      for (let j = 0; j <= 6; j++) {\n        if (tsv.lines[i][cInvGfx[j]]) invgfx[j] = tsv.lines[i][cInvGfx[j]];\n      }\n      o.ig = invgfx;\n      o.eq1 = tsv.lines[i][cEquiv1];\n      o.eq2 = tsv.lines[i][cEquiv2];\n      o.n = tsv.lines[i][cItemType];\n      o.c = [o.n];\n      arr[code] = o;\n    }\n  }\n\n  for (const k of Object.keys(arr)) {\n    arr[k].c = [..._resolvetItemTypeCategories(arr, k)];\n    if (arr[k] !== undefined && arr[arr[k].eq1] !== undefined) {\n      arr[k].eq1n = arr[arr[k].eq1].n;\n    }\n\n    if (arr[k] !== undefined && arr[arr[k].eq2] !== undefined) {\n      arr[k].eq2n = arr[arr[k].eq2].n;\n    }\n  }\n\n  return arr;\n}\n\nfunction _resolvetItemTypeCategories(arr: any, key: string) {\n  let res: string[] = [];\n  if (arr[key] !== undefined) {\n    res = [arr[key].n, ..._resolvetItemTypeCategories(arr, arr[key].eq1), ..._resolvetItemTypeCategories(arr, arr[key].eq2)];\n  }\n  return res;\n}\n\nfunction _readItems(tsv: any, itemtypes: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cCode = tsv.header.indexOf(\"code\");\n  const cNameStr = tsv.header.indexOf(\"namestr\");\n  const cStackable = tsv.header.indexOf(\"stackable\");\n  const cMindam = tsv.header.indexOf(\"mindam\");\n  const cMaxdam = tsv.header.indexOf(\"maxdam\");\n  const cTwoHandMindam = tsv.header.indexOf(\"2handmindam\");\n  const cTwoHandMaxdam = tsv.header.indexOf(\"2handmaxdam\");\n  const cMinmisdam = tsv.header.indexOf(\"minmisdam\");\n  const cMaxmisdam = tsv.header.indexOf(\"maxmisdam\");\n  const cReqstr = tsv.header.indexOf(\"reqstr\");\n  const cReqdex = tsv.header.indexOf(\"reqdex\");\n  const cHasinv = tsv.header.indexOf(\"hasinv\");\n  const cGemapplytype = tsv.header.indexOf(\"gemapplytype\");\n  const cInvfile = tsv.header.indexOf(\"invfile\");\n  const cUniqueInvfile = tsv.header.indexOf(\"uniqueinvfile\");\n  const cSetInvfile = tsv.header.indexOf(\"setinvfile\");\n  const cInvwidth = tsv.header.indexOf(\"invwidth\");\n  const cInvheight = tsv.header.indexOf(\"invheight\");\n  const cInvtransform = tsv.header.indexOf(\"InvTrans\");\n  const cType = tsv.header.indexOf(\"type\");\n  const cNormCode = tsv.header.indexOf(\"normcode\");\n  const cUberCode = tsv.header.indexOf(\"ubercode\");\n  const cUltraCode = tsv.header.indexOf(\"ultracode\");\n\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const code = tsv.lines[i][cCode];\n    if (code) {\n      const item = {} as any;\n      item.code = code;\n      item.nc = tsv.lines[i][cNormCode];\n      item.exc = tsv.lines[i][cUberCode];\n      item.elc = tsv.lines[i][cUltraCode];\n      item.iq =\n        item.code === item.exc\n          ? types.EItemQuality.exceptional\n          : item.code === item.elc\n          ? types.EItemQuality.elite\n          : types.EItemQuality.normal;\n      item.n = strings[tsv.lines[i][cNameStr]];\n      if (tsv.lines[i][cStackable] && +tsv.lines[i][cStackable] > 0) item.s = 1;\n      if (tsv.lines[i][cMindam] && +tsv.lines[i][cMindam] > 0) item.mind = +tsv.lines[i][cMindam];\n      if (tsv.lines[i][cMaxdam] && +tsv.lines[i][cMaxdam] > 0) item.maxd = +tsv.lines[i][cMaxdam];\n      if (tsv.lines[i][cTwoHandMindam] && +tsv.lines[i][cTwoHandMindam] > 0) item.min2d = +tsv.lines[i][cTwoHandMindam];\n      if (tsv.lines[i][cTwoHandMaxdam] && +tsv.lines[i][cTwoHandMaxdam] > 0) item.max2d = +tsv.lines[i][cTwoHandMaxdam];\n      if (tsv.lines[i][cMinmisdam] && +tsv.lines[i][cMinmisdam] > 0) item.minmd = +tsv.lines[i][cMinmisdam];\n      if (tsv.lines[i][cMaxmisdam] && +tsv.lines[i][cMaxmisdam] > 0) item.maxmd = +tsv.lines[i][cMaxmisdam];\n      if (tsv.lines[i][cReqstr]) item.rs = +tsv.lines[i][cReqstr];\n      if (tsv.lines[i][cReqdex]) item.rd = +tsv.lines[i][cReqdex];\n      if (tsv.lines[i][cHasinv]) item.hi = +tsv.lines[i][cHasinv];\n      if (tsv.lines[i][cGemapplytype]) item.gt = +tsv.lines[i][cGemapplytype];\n      if (tsv.lines[i][cInvfile]) item.i = tsv.lines[i][cInvfile];\n      if (tsv.lines[i][cUniqueInvfile]) item.ui = tsv.lines[i][cUniqueInvfile];\n      if (tsv.lines[i][cSetInvfile]) item.si = tsv.lines[i][cSetInvfile];\n      if (tsv.lines[i][cInvwidth]) item.iw = +tsv.lines[i][cInvwidth];\n      if (tsv.lines[i][cInvheight]) item.ih = +tsv.lines[i][cInvheight];\n      if (tsv.lines[i][cInvtransform]) item.it = +tsv.lines[i][cInvtransform];\n      const type = itemtypes[tsv.lines[i][cType]];\n      if (type && type.ig) {\n        item.ig = type.ig;\n        item.eq1n = type.eq1n;\n        item.eq2n = type.eq2n;\n        item.c = type.c;\n      }\n      arr.push(item);\n    }\n  }\n  return arr;\n}\n\nfunction _readGems(miscItems: any, tsv: any, strings: any) {\n  const cCode = tsv.header.indexOf(\"code\");\n  const types = [\"weapon\", \"helm\", \"shield\"];\n  const cols = {} as any;\n  for (const type of types) {\n    cols[type] = [];\n    for (let j = 1; j <= 3; j++) {\n      cols[type][j] = {} as any;\n      cols[type][j].cMod = tsv.header.indexOf(`${type}Mod${j}Code`);\n      cols[type][j].cParam = tsv.header.indexOf(`${type}Mod${j}Param`);\n      cols[type][j].cMin = tsv.header.indexOf(`${type}Mod${j}Min`);\n      cols[type][j].cMax = tsv.header.indexOf(`${type}Mod${j}Max`);\n    }\n  }\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const code = tsv.lines[i][cCode];\n    if (code && code != \"Expansion\") {\n      const item = miscItems[code];\n      for (let k = 0; k < 3; k++) {\n        const type = types[k];\n        for (let j = 1; j <= 3; j++) {\n          const mod = tsv.lines[i][cols[type][j].cMod];\n          if (!mod) {\n            break;\n          }\n          if (j == 1) {\n            if (!item.m) item.m = [];\n            item.m[k] = [];\n          }\n          const m = {} as any;\n          m.m = mod;\n          if (tsv.lines[i][cols[type][j].cParam]) m.p = +tsv.lines[i][cols[type][j].cParam];\n          if (tsv.lines[i][cols[type][j].cMin]) m.min = +tsv.lines[i][cols[type][j].cMin];\n          if (tsv.lines[i][cols[type][j].cMax]) m.max = +tsv.lines[i][cols[type][j].cMax];\n          item.m[k].push(m);\n        }\n      }\n    }\n  }\n}\n\nfunction _readSetOrUnqItems(tsv: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cIndex = tsv.header.indexOf(\"index\");\n  const cInvfile = tsv.header.indexOf(\"invfile\");\n  let cCode = tsv.header.indexOf(\"code\");\n  if (cCode < 0) cCode = tsv.header.indexOf(\"item\");\n  const cInvtransform = tsv.header.indexOf(\"invtransform\");\n  let id = 0;\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const index = tsv.lines[i][cIndex];\n    if (index && index != \"Expansion\") {\n      const o = {} as any;\n      o.n = strings[tsv.lines[i][cIndex]];\n      if (tsv.lines[i][cInvfile]) o.i = tsv.lines[i][cInvfile];\n      if (tsv.lines[i][cCode]) o.c = tsv.lines[i][cCode];\n      if (tsv.lines[i][cInvtransform]) o.tc = tsv.lines[i][cInvtransform];\n      arr[id] = o;\n      id++;\n    }\n  }\n  return arr;\n}\n\nfunction _readItemStatCosts(tsv: any, strings: any): any[] {\n  const arr = [] as any[];\n  const cStat = tsv.header.indexOf(\"Stat\");\n  const cId = tsv.header.indexOf(\"ID\");\n  const cCSvBits = tsv.header.indexOf(\"CSvBits\");\n  const cCSvParam = tsv.header.indexOf(\"CSvParam\");\n  const cCSvSigned = tsv.header.indexOf(\"CSvSigned\");\n  const cEncode = tsv.header.indexOf(\"Encode\");\n  const cValShift = tsv.header.indexOf(\"ValShift\");\n  const cSigned = tsv.header.indexOf(\"Signed\");\n  const cSaveBits = tsv.header.indexOf(\"Save Bits\");\n  const cSaveAdd = tsv.header.indexOf(\"Save Add\");\n  const cSaveParamBits = tsv.header.indexOf(\"Save Param Bits\");\n  const cDescPriority = tsv.header.indexOf(\"descpriority\");\n  const cDescFunc = tsv.header.indexOf(\"descfunc\");\n  const cDescVal = tsv.header.indexOf(\"descval\");\n  const cDescstrpos = tsv.header.indexOf(\"descstrpos\");\n  const cDescstrneg = tsv.header.indexOf(\"descstrneg\");\n  const cDescstr2 = tsv.header.indexOf(\"descstr2\");\n  const cDgrp = tsv.header.indexOf(\"dgrp\");\n  const cDgrpFunc = tsv.header.indexOf(\"dgrpfunc\");\n  const cDgrpVal = tsv.header.indexOf(\"dgrpval\");\n  const cDgrpstrpos = tsv.header.indexOf(\"dgrpstrpos\");\n  const cDgrpstrneg = tsv.header.indexOf(\"dgrpstrneg\");\n  const cDgrpstr2 = tsv.header.indexOf(\"dgrpstr2\");\n  const cOp = tsv.header.indexOf(\"op\");\n  const cOpParam = tsv.header.indexOf(\"op param\");\n  const cOpBase = tsv.header.indexOf(\"op base\");\n  const cOpStat1 = tsv.header.indexOf(\"op stat1\");\n  const cOpStat2 = tsv.header.indexOf(\"op stat2\");\n  const cOpStat3 = tsv.header.indexOf(\"op stat3\");\n  for (let i = 1; i < tsv.lines.length; i++) {\n    const id = +tsv.lines[i][cId];\n    const stat = tsv.lines[i][cStat];\n    if (stat) {\n      const o = {} as any;\n      o.s = stat;\n      if (tsv.lines[i][cCSvBits]) o.cB = +tsv.lines[i][cCSvBits];\n      if (tsv.lines[i][cCSvParam]) o.cP = +tsv.lines[i][cCSvParam];\n      if (tsv.lines[i][cCSvSigned]) o.cS = +tsv.lines[i][cCSvSigned];\n      if (tsv.lines[i][cEncode]) o.e = +tsv.lines[i][cEncode];\n      if (tsv.lines[i][cValShift]) o.vS = +tsv.lines[i][cValShift];\n      if (tsv.lines[i][cSigned]) o.sS = +tsv.lines[i][cSigned];\n      if (tsv.lines[i][cSaveBits]) o.sB = +tsv.lines[i][cSaveBits];\n      if (tsv.lines[i][cSaveAdd]) o.sA = +tsv.lines[i][cSaveAdd];\n      if (tsv.lines[i][cSaveParamBits]) o.sP = +tsv.lines[i][cSaveParamBits];\n      if (tsv.lines[i][cDescPriority]) o.so = +tsv.lines[i][cDescPriority];\n      if (tsv.lines[i][cDescFunc]) o.dF = +tsv.lines[i][cDescFunc];\n      if (tsv.lines[i][cDescVal]) o.dV = +tsv.lines[i][cDescVal];\n      if (tsv.lines[i][cDescstrpos]) o.dP = strings[tsv.lines[i][cDescstrpos]];\n      if (tsv.lines[i][cDescstrneg]) o.dN = strings[tsv.lines[i][cDescstrneg]];\n      if (tsv.lines[i][cDescstr2]) o.d2 = strings[tsv.lines[i][cDescstr2]];\n      if (tsv.lines[i][cDgrp]) o.dg = +tsv.lines[i][cDgrp];\n      if (tsv.lines[i][cDgrpFunc]) o.dgF = +tsv.lines[i][cDgrpFunc];\n      if (tsv.lines[i][cDgrpVal]) o.dgV = +tsv.lines[i][cDgrpVal];\n      if (tsv.lines[i][cDgrpstrpos]) o.dgP = strings[tsv.lines[i][cDgrpstrpos]];\n      if (tsv.lines[i][cDgrpstrneg]) o.dN = strings[tsv.lines[i][cDgrpstrneg]];\n      if (tsv.lines[i][cDgrpstr2]) o.dg2 = strings[tsv.lines[i][cDgrpstr2]];\n      if (tsv.lines[i][cOp]) o.o = +tsv.lines[i][cOp];\n      if (tsv.lines[i][cOpParam]) o.op = +tsv.lines[i][cOpParam];\n      if (tsv.lines[i][cOpBase]) o.ob = tsv.lines[i][cOpBase];\n      if (tsv.lines[i][cOpStat1]) o.os = [tsv.lines[i][cOpStat1]];\n      if (tsv.lines[i][cOpStat2]) o.os[1] = tsv.lines[i][cOpStat2];\n      if (tsv.lines[i][cOpStat3]) o.os[2] = tsv.lines[i][cOpStat3];\n\n      const dmgstatrange = item_property_stat_count[stat];\n      if (dmgstatrange) {\n        o.np = dmgstatrange.numprops;\n        o.dR = strings[dmgstatrange.rangestr];\n        o.dE = strings[dmgstatrange.equalstr];\n      }\n      arr[id] = o;\n    }\n  }\n  return arr;\n}\n\nexport { readConstantData };\n","export * from \"./d2/d2s\";\nexport { readHeader, readHeaderData, writeHeader, writeHeaderData, fixHeader } from \"./d2/header\";\nexport { readAttributes, writeAttributes } from \"./d2/attributes\";\nexport { readSkills, writeSkills } from \"./d2/skills\";\nexport { enhanceAttributes, enhanceItems, enhancePlayerAttributes } from \"./d2/attribute_enhancer\";\nexport * from \"./data/parser\";\nexport * as types from \"./d2/types\";\n\nexport * from \"./d2/stash\";\n"],"sourceRoot":""}